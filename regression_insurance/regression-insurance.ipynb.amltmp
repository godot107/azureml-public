{
  "cells": [
    {
      "cell_type": "markdown",
      "source": [
        "## Motivation\r\n",
        "\r\n",
        "Practice training a model using AzureML and explore functionalities and capabilities such as provisioning a compute cluster, running experiments\r\n",
        "\r\n",
        "## Scenario\r\n",
        "\r\n",
        "## Strategy\r\n",
        "\r\n"
      ],
      "metadata": {
        "nteract": {
          "transient": {
            "deleting": false
          }
        }
      }
    },
    {
      "cell_type": "code",
      "source": [
        "pip install azureml.widgets"
      ],
      "outputs": [
        {
          "output_type": "stream",
          "name": "stdout",
          "text": "Collecting azureml.widgets\n  Downloading azureml_widgets-1.49.0-py3-none-any.whl (14.1 MB)\n\u001b[2K     \u001b[90m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m \u001b[32m14.1/14.1 MB\u001b[0m \u001b[31m80.6 MB/s\u001b[0m eta \u001b[36m0:00:00\u001b[0m00:01\u001b[0m00:01\u001b[0m\n\u001b[?25hCollecting jinja2<=2.11.2\n  Downloading Jinja2-2.11.2-py2.py3-none-any.whl (125 kB)\n\u001b[2K     \u001b[90m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m \u001b[32m125.8/125.8 kB\u001b[0m \u001b[31m15.1 MB/s\u001b[0m eta \u001b[36m0:00:00\u001b[0m\n\u001b[?25hCollecting azureml-core~=1.49.0\n  Downloading azureml_core-1.49.0-py3-none-any.whl (3.3 MB)\n\u001b[2K     \u001b[90m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m \u001b[32m3.3/3.3 MB\u001b[0m \u001b[31m77.7 MB/s\u001b[0m eta \u001b[36m0:00:00\u001b[0m:00:01\u001b[0m\n\u001b[?25hCollecting azureml-telemetry~=1.49.0\n  Downloading azureml_telemetry-1.49.0-py3-none-any.whl (30 kB)\nCollecting markupsafe<2.1.0\n  Downloading MarkupSafe-2.0.1-cp310-cp310-manylinux_2_5_x86_64.manylinux1_x86_64.manylinux_2_12_x86_64.manylinux2010_x86_64.whl (30 kB)\nRequirement already satisfied: azure-storage-blob>=12.6.0 in /anaconda/envs/azureml_py310_sdkv2/lib/python3.10/site-packages (from azureml.widgets) (12.14.1)\nCollecting ipywidgets<8.0.0,>=7.0.0\n  Downloading ipywidgets-7.7.3-py2.py3-none-any.whl (123 kB)\n\u001b[2K     \u001b[90m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m \u001b[32m123.4/123.4 kB\u001b[0m \u001b[31m13.9 MB/s\u001b[0m eta \u001b[36m0:00:00\u001b[0m\n\u001b[?25hRequirement already satisfied: azure-core<2.0.0,>=1.24.2 in /anaconda/envs/azureml_py310_sdkv2/lib/python3.10/site-packages (from azure-storage-blob>=12.6.0->azureml.widgets) (1.26.2)\nRequirement already satisfied: msrest>=0.7.1 in /anaconda/envs/azureml_py310_sdkv2/lib/python3.10/site-packages (from azure-storage-blob>=12.6.0->azureml.widgets) (0.7.1)\nRequirement already satisfied: cryptography>=2.1.4 in /anaconda/envs/azureml_py310_sdkv2/lib/python3.10/site-packages (from azure-storage-blob>=12.6.0->azureml.widgets) (39.0.0)\nRequirement already satisfied: azure-graphrbac<1.0.0,>=0.40.0 in /anaconda/envs/azureml_py310_sdkv2/lib/python3.10/site-packages (from azureml-core~=1.49.0->azureml.widgets) (0.61.1)\nRequirement already satisfied: packaging<22.0,>=20.0 in /anaconda/envs/azureml_py310_sdkv2/lib/python3.10/site-packages (from azureml-core~=1.49.0->azureml.widgets) (21.3)\nRequirement already satisfied: jsonpickle<3.0.0 in /anaconda/envs/azureml_py310_sdkv2/lib/python3.10/site-packages (from azureml-core~=1.49.0->azureml.widgets) (2.2.0)\nRequirement already satisfied: azure-mgmt-resource<22.0.0,>=15.0.0 in /anaconda/envs/azureml_py310_sdkv2/lib/python3.10/site-packages (from azureml-core~=1.49.0->azureml.widgets) (21.2.1)\nRequirement already satisfied: azure-mgmt-containerregistry<11,>=8.2.0 in /anaconda/envs/azureml_py310_sdkv2/lib/python3.10/site-packages (from azureml-core~=1.49.0->azureml.widgets) (10.0.0)\nRequirement already satisfied: ndg-httpsclient<=0.5.1 in /anaconda/envs/azureml_py310_sdkv2/lib/python3.10/site-packages (from azureml-core~=1.49.0->azureml.widgets) (0.5.1)\nRequirement already satisfied: contextlib2<22.0.0 in /anaconda/envs/azureml_py310_sdkv2/lib/python3.10/site-packages (from azureml-core~=1.49.0->azureml.widgets) (21.6.0)\nRequirement already satisfied: python-dateutil<3.0.0,>=2.7.3 in /anaconda/envs/azureml_py310_sdkv2/lib/python3.10/site-packages (from azureml-core~=1.49.0->azureml.widgets) (2.8.2)\nRequirement already satisfied: PyJWT<3.0.0 in /anaconda/envs/azureml_py310_sdkv2/lib/python3.10/site-packages (from azureml-core~=1.49.0->azureml.widgets) (2.6.0)\nRequirement already satisfied: argcomplete<3 in /anaconda/envs/azureml_py310_sdkv2/lib/python3.10/site-packages (from azureml-core~=1.49.0->azureml.widgets) (2.0.0)\nRequirement already satisfied: SecretStorage<4.0.0 in /anaconda/envs/azureml_py310_sdkv2/lib/python3.10/site-packages (from azureml-core~=1.49.0->azureml.widgets) (3.3.3)\nRequirement already satisfied: urllib3<2.0.0,>=1.23 in /anaconda/envs/azureml_py310_sdkv2/lib/python3.10/site-packages (from azureml-core~=1.49.0->azureml.widgets) (1.26.14)\nRequirement already satisfied: msal-extensions<=1.0.0,>=0.3.0 in /anaconda/envs/azureml_py310_sdkv2/lib/python3.10/site-packages (from azureml-core~=1.49.0->azureml.widgets) (1.0.0)\nRequirement already satisfied: pkginfo in /anaconda/envs/azureml_py310_sdkv2/lib/python3.10/site-packages (from azureml-core~=1.49.0->azureml.widgets) (1.9.6)\nRequirement already satisfied: jmespath<2.0.0 in /anaconda/envs/azureml_py310_sdkv2/lib/python3.10/site-packages (from azureml-core~=1.49.0->azureml.widgets) (1.0.1)\nRequirement already satisfied: knack~=0.10.0 in /anaconda/envs/azureml_py310_sdkv2/lib/python3.10/site-packages (from azureml-core~=1.49.0->azureml.widgets) (0.10.1)\nRequirement already satisfied: azure-common<2.0.0,>=1.1.12 in /anaconda/envs/azureml_py310_sdkv2/lib/python3.10/site-packages (from azureml-core~=1.49.0->azureml.widgets) (1.1.28)\nRequirement already satisfied: pytz in /anaconda/envs/azureml_py310_sdkv2/lib/python3.10/site-packages (from azureml-core~=1.49.0->azureml.widgets) (2022.7.1)\nRequirement already satisfied: docker<7.0.0 in /anaconda/envs/azureml_py310_sdkv2/lib/python3.10/site-packages (from azureml-core~=1.49.0->azureml.widgets) (6.0.1)\nRequirement already satisfied: adal<=1.2.7,>=1.2.0 in /anaconda/envs/azureml_py310_sdkv2/lib/python3.10/site-packages (from azureml-core~=1.49.0->azureml.widgets) (1.2.7)\nRequirement already satisfied: msrestazure<=0.6.4,>=0.4.33 in /anaconda/envs/azureml_py310_sdkv2/lib/python3.10/site-packages (from azureml-core~=1.49.0->azureml.widgets) (0.6.4)\nRequirement already satisfied: paramiko<3.0.0,>=2.0.8 in /anaconda/envs/azureml_py310_sdkv2/lib/python3.10/site-packages (from azureml-core~=1.49.0->azureml.widgets) (2.12.0)\nRequirement already satisfied: backports.tempfile in /anaconda/envs/azureml_py310_sdkv2/lib/python3.10/site-packages (from azureml-core~=1.49.0->azureml.widgets) (1.0)\nRequirement already satisfied: azure-mgmt-storage<21.0.0,>=16.0.0 in /anaconda/envs/azureml_py310_sdkv2/lib/python3.10/site-packages (from azureml-core~=1.49.0->azureml.widgets) (20.1.0)\nRequirement already satisfied: requests[socks]<3.0.0,>=2.19.1 in /anaconda/envs/azureml_py310_sdkv2/lib/python3.10/site-packages (from azureml-core~=1.49.0->azureml.widgets) (2.28.2)\nRequirement already satisfied: azure-mgmt-keyvault<11.0.0,>=0.40.0 in /anaconda/envs/azureml_py310_sdkv2/lib/python3.10/site-packages (from azureml-core~=1.49.0->azureml.widgets) (10.1.0)\nRequirement already satisfied: azure-mgmt-authorization<4,>=0.40.0 in /anaconda/envs/azureml_py310_sdkv2/lib/python3.10/site-packages (from azureml-core~=1.49.0->azureml.widgets) (3.0.0)\nRequirement already satisfied: pathspec<1.0.0 in /anaconda/envs/azureml_py310_sdkv2/lib/python3.10/site-packages (from azureml-core~=1.49.0->azureml.widgets) (0.10.3)\nRequirement already satisfied: pyopenssl<24.0.0 in /anaconda/envs/azureml_py310_sdkv2/lib/python3.10/site-packages (from azureml-core~=1.49.0->azureml.widgets) (22.1.0)\nRequirement already satisfied: humanfriendly<11.0,>=4.7 in /anaconda/envs/azureml_py310_sdkv2/lib/python3.10/site-packages (from azureml-core~=1.49.0->azureml.widgets) (10.0)\nRequirement already satisfied: msal<2.0.0,>=1.15.0 in /anaconda/envs/azureml_py310_sdkv2/lib/python3.10/site-packages (from azureml-core~=1.49.0->azureml.widgets) (1.20.0)\nCollecting applicationinsights\n  Downloading applicationinsights-0.11.10-py2.py3-none-any.whl (55 kB)\n\u001b[2K     \u001b[90m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m \u001b[32m55.1/55.1 kB\u001b[0m \u001b[31m5.6 MB/s\u001b[0m eta \u001b[36m0:00:00\u001b[0m\n\u001b[?25hCollecting jupyterlab-widgets<3,>=1.0.0\n  Downloading jupyterlab_widgets-1.1.2-py3-none-any.whl (245 kB)\n\u001b[2K     \u001b[90m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m \u001b[32m245.7/245.7 kB\u001b[0m \u001b[31m23.9 MB/s\u001b[0m eta \u001b[36m0:00:00\u001b[0m\n\u001b[?25hCollecting widgetsnbextension~=3.6.0\n  Downloading widgetsnbextension-3.6.2-py2.py3-none-any.whl (1.6 MB)\n\u001b[2K     \u001b[90m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m \u001b[32m1.6/1.6 MB\u001b[0m \u001b[31m59.8 MB/s\u001b[0m eta \u001b[36m0:00:00\u001b[0m\n\u001b[?25hRequirement already satisfied: ipykernel>=4.5.1 in /anaconda/envs/azureml_py310_sdkv2/lib/python3.10/site-packages (from ipywidgets<8.0.0,>=7.0.0->azureml.widgets) (6.9.1)\nCollecting ipython-genutils~=0.2.0\n  Downloading ipython_genutils-0.2.0-py2.py3-none-any.whl (26 kB)\nRequirement already satisfied: traitlets>=4.3.1 in /anaconda/envs/azureml_py310_sdkv2/lib/python3.10/site-packages (from ipywidgets<8.0.0,>=7.0.0->azureml.widgets) (5.1.1)\nRequirement already satisfied: ipython>=4.0.0 in /anaconda/envs/azureml_py310_sdkv2/lib/python3.10/site-packages (from ipywidgets<8.0.0,>=7.0.0->azureml.widgets) (8.4.0)\nRequirement already satisfied: six>=1.11.0 in /anaconda/envs/azureml_py310_sdkv2/lib/python3.10/site-packages (from azure-core<2.0.0,>=1.24.2->azure-storage-blob>=12.6.0->azureml.widgets) (1.16.0)\nRequirement already satisfied: typing-extensions>=4.0.1 in /anaconda/envs/azureml_py310_sdkv2/lib/python3.10/site-packages (from azure-core<2.0.0,>=1.24.2->azure-storage-blob>=12.6.0->azureml.widgets) (4.4.0)\nRequirement already satisfied: azure-mgmt-core<2.0.0,>=1.3.2 in /anaconda/envs/azureml_py310_sdkv2/lib/python3.10/site-packages (from azure-mgmt-authorization<4,>=0.40.0->azureml-core~=1.49.0->azureml.widgets) (1.3.2)\nRequirement already satisfied: cffi>=1.12 in /anaconda/envs/azureml_py310_sdkv2/lib/python3.10/site-packages (from cryptography>=2.1.4->azure-storage-blob>=12.6.0->azureml.widgets) (1.15.1)\nRequirement already satisfied: websocket-client>=0.32.0 in /anaconda/envs/azureml_py310_sdkv2/lib/python3.10/site-packages (from docker<7.0.0->azureml-core~=1.49.0->azureml.widgets) (1.4.2)\nRequirement already satisfied: jupyter-client<8.0 in /anaconda/envs/azureml_py310_sdkv2/lib/python3.10/site-packages (from ipykernel>=4.5.1->ipywidgets<8.0.0,>=7.0.0->azureml.widgets) (7.2.2)\nRequirement already satisfied: matplotlib-inline<0.2.0,>=0.1.0 in /anaconda/envs/azureml_py310_sdkv2/lib/python3.10/site-packages (from ipykernel>=4.5.1->ipywidgets<8.0.0,>=7.0.0->azureml.widgets) (0.1.2)\nRequirement already satisfied: nest-asyncio in /anaconda/envs/azureml_py310_sdkv2/lib/python3.10/site-packages (from ipykernel>=4.5.1->ipywidgets<8.0.0,>=7.0.0->azureml.widgets) (1.5.5)\nRequirement already satisfied: tornado<7.0,>=4.2 in /anaconda/envs/azureml_py310_sdkv2/lib/python3.10/site-packages (from ipykernel>=4.5.1->ipywidgets<8.0.0,>=7.0.0->azureml.widgets) (6.1)\nRequirement already satisfied: debugpy<2.0,>=1.0.0 in /anaconda/envs/azureml_py310_sdkv2/lib/python3.10/site-packages (from ipykernel>=4.5.1->ipywidgets<8.0.0,>=7.0.0->azureml.widgets) (1.5.1)\nRequirement already satisfied: stack-data in /anaconda/envs/azureml_py310_sdkv2/lib/python3.10/site-packages (from ipython>=4.0.0->ipywidgets<8.0.0,>=7.0.0->azureml.widgets) (0.2.0)\nRequirement already satisfied: pexpect>4.3 in /anaconda/envs/azureml_py310_sdkv2/lib/python3.10/site-packages (from ipython>=4.0.0->ipywidgets<8.0.0,>=7.0.0->azureml.widgets) (4.8.0)\nRequirement already satisfied: backcall in /anaconda/envs/azureml_py310_sdkv2/lib/python3.10/site-packages (from ipython>=4.0.0->ipywidgets<8.0.0,>=7.0.0->azureml.widgets) (0.2.0)\nRequirement already satisfied: pickleshare in /anaconda/envs/azureml_py310_sdkv2/lib/python3.10/site-packages (from ipython>=4.0.0->ipywidgets<8.0.0,>=7.0.0->azureml.widgets) (0.7.5)\nRequirement already satisfied: decorator in /anaconda/envs/azureml_py310_sdkv2/lib/python3.10/site-packages (from ipython>=4.0.0->ipywidgets<8.0.0,>=7.0.0->azureml.widgets) (5.1.1)\nRequirement already satisfied: jedi>=0.16 in /anaconda/envs/azureml_py310_sdkv2/lib/python3.10/site-packages (from ipython>=4.0.0->ipywidgets<8.0.0,>=7.0.0->azureml.widgets) (0.18.1)\nRequirement already satisfied: pygments>=2.4.0 in /anaconda/envs/azureml_py310_sdkv2/lib/python3.10/site-packages (from ipython>=4.0.0->ipywidgets<8.0.0,>=7.0.0->azureml.widgets) (2.11.2)\nRequirement already satisfied: prompt-toolkit!=3.0.0,!=3.0.1,<3.1.0,>=2.0.0 in /anaconda/envs/azureml_py310_sdkv2/lib/python3.10/site-packages (from ipython>=4.0.0->ipywidgets<8.0.0,>=7.0.0->azureml.widgets) (3.0.20)\nRequirement already satisfied: setuptools>=18.5 in /anaconda/envs/azureml_py310_sdkv2/lib/python3.10/site-packages (from ipython>=4.0.0->ipywidgets<8.0.0,>=7.0.0->azureml.widgets) (65.6.3)\nRequirement already satisfied: tabulate in /anaconda/envs/azureml_py310_sdkv2/lib/python3.10/site-packages (from knack~=0.10.0->azureml-core~=1.49.0->azureml.widgets) (0.9.0)\nRequirement already satisfied: pyyaml in /anaconda/envs/azureml_py310_sdkv2/lib/python3.10/site-packages (from knack~=0.10.0->azureml-core~=1.49.0->azureml.widgets) (6.0)\nRequirement already satisfied: portalocker<3,>=1.0 in /anaconda/envs/azureml_py310_sdkv2/lib/python3.10/site-packages (from msal-extensions<=1.0.0,>=0.3.0->azureml-core~=1.49.0->azureml.widgets) (2.7.0)\nRequirement already satisfied: isodate>=0.6.0 in /anaconda/envs/azureml_py310_sdkv2/lib/python3.10/site-packages (from msrest>=0.7.1->azure-storage-blob>=12.6.0->azureml.widgets) (0.6.1)\nRequirement already satisfied: requests-oauthlib>=0.5.0 in /anaconda/envs/azureml_py310_sdkv2/lib/python3.10/site-packages (from msrest>=0.7.1->azure-storage-blob>=12.6.0->azureml.widgets) (1.3.1)\nRequirement already satisfied: certifi>=2017.4.17 in /anaconda/envs/azureml_py310_sdkv2/lib/python3.10/site-packages (from msrest>=0.7.1->azure-storage-blob>=12.6.0->azureml.widgets) (2022.6.15)\nRequirement already satisfied: pyasn1>=0.1.1 in /anaconda/envs/azureml_py310_sdkv2/lib/python3.10/site-packages (from ndg-httpsclient<=0.5.1->azureml-core~=1.49.0->azureml.widgets) (0.4.8)\nRequirement already satisfied: pyparsing!=3.0.5,>=2.0.2 in /anaconda/envs/azureml_py310_sdkv2/lib/python3.10/site-packages (from packaging<22.0,>=20.0->azureml-core~=1.49.0->azureml.widgets) (3.0.9)\nRequirement already satisfied: pynacl>=1.0.1 in /anaconda/envs/azureml_py310_sdkv2/lib/python3.10/site-packages (from paramiko<3.0.0,>=2.0.8->azureml-core~=1.49.0->azureml.widgets) (1.5.0)\nRequirement already satisfied: bcrypt>=3.1.3 in /anaconda/envs/azureml_py310_sdkv2/lib/python3.10/site-packages (from paramiko<3.0.0,>=2.0.8->azureml-core~=1.49.0->azureml.widgets) (4.0.1)\nCollecting cryptography>=2.1.4\n  Downloading cryptography-38.0.4-cp36-abi3-manylinux_2_28_x86_64.whl (4.2 MB)\n\u001b[2K     \u001b[90m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m \u001b[32m4.2/4.2 MB\u001b[0m \u001b[31m48.8 MB/s\u001b[0m eta \u001b[36m0:00:00\u001b[0m:00:01\u001b[0m\n\u001b[?25hRequirement already satisfied: idna<4,>=2.5 in /anaconda/envs/azureml_py310_sdkv2/lib/python3.10/site-packages (from requests[socks]<3.0.0,>=2.19.1->azureml-core~=1.49.0->azureml.widgets) (3.4)\nRequirement already satisfied: charset-normalizer<4,>=2 in /anaconda/envs/azureml_py310_sdkv2/lib/python3.10/site-packages (from requests[socks]<3.0.0,>=2.19.1->azureml-core~=1.49.0->azureml.widgets) (3.0.1)\nRequirement already satisfied: PySocks!=1.5.7,>=1.5.6 in /anaconda/envs/azureml_py310_sdkv2/lib/python3.10/site-packages (from requests[socks]<3.0.0,>=2.19.1->azureml-core~=1.49.0->azureml.widgets) (1.7.1)\nRequirement already satisfied: jeepney>=0.6 in /anaconda/envs/azureml_py310_sdkv2/lib/python3.10/site-packages (from SecretStorage<4.0.0->azureml-core~=1.49.0->azureml.widgets) (0.8.0)\nCollecting notebook>=4.4.1\n  Downloading notebook-6.5.2-py3-none-any.whl (439 kB)\n\u001b[2K     \u001b[90m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m \u001b[32m439.1/439.1 kB\u001b[0m \u001b[31m35.1 MB/s\u001b[0m eta \u001b[36m0:00:00\u001b[0m\n\u001b[?25hRequirement already satisfied: backports.weakref in /anaconda/envs/azureml_py310_sdkv2/lib/python3.10/site-packages (from backports.tempfile->azureml-core~=1.49.0->azureml.widgets) (1.0.post1)\nRequirement already satisfied: pycparser in /anaconda/envs/azureml_py310_sdkv2/lib/python3.10/site-packages (from cffi>=1.12->cryptography>=2.1.4->azure-storage-blob>=12.6.0->azureml.widgets) (2.21)\nRequirement already satisfied: parso<0.9.0,>=0.8.0 in /anaconda/envs/azureml_py310_sdkv2/lib/python3.10/site-packages (from jedi>=0.16->ipython>=4.0.0->ipywidgets<8.0.0,>=7.0.0->azureml.widgets) (0.8.3)\nRequirement already satisfied: entrypoints in /anaconda/envs/azureml_py310_sdkv2/lib/python3.10/site-packages (from jupyter-client<8.0->ipykernel>=4.5.1->ipywidgets<8.0.0,>=7.0.0->azureml.widgets) (0.4)\nRequirement already satisfied: jupyter-core>=4.9.2 in /anaconda/envs/azureml_py310_sdkv2/lib/python3.10/site-packages (from jupyter-client<8.0->ipykernel>=4.5.1->ipywidgets<8.0.0,>=7.0.0->azureml.widgets) (4.10.0)\nRequirement already satisfied: pyzmq>=22.3 in /anaconda/envs/azureml_py310_sdkv2/lib/python3.10/site-packages (from jupyter-client<8.0->ipykernel>=4.5.1->ipywidgets<8.0.0,>=7.0.0->azureml.widgets) (23.2.0)\nCollecting nbclassic>=0.4.7\n  Downloading nbclassic-0.5.2-py3-none-any.whl (10.0 MB)\n\u001b[2K     \u001b[90m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m \u001b[32m10.0/10.0 MB\u001b[0m \u001b[31m99.9 MB/s\u001b[0m eta \u001b[36m0:00:00\u001b[0m00:01\u001b[0m00:01\u001b[0m\n\u001b[?25hCollecting nbformat\n  Downloading nbformat-5.7.3-py3-none-any.whl (78 kB)\n\u001b[2K     \u001b[90m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m \u001b[32m78.1/78.1 kB\u001b[0m \u001b[31m9.7 MB/s\u001b[0m eta \u001b[36m0:00:00\u001b[0m\n\u001b[?25hCollecting nbconvert>=5\n  Downloading nbconvert-7.2.9-py3-none-any.whl (274 kB)\n\u001b[2K     \u001b[90m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m \u001b[32m274.9/274.9 kB\u001b[0m \u001b[31m25.9 MB/s\u001b[0m eta \u001b[36m0:00:00\u001b[0m\n\u001b[?25hCollecting argon2-cffi\n  Downloading argon2_cffi-21.3.0-py3-none-any.whl (14 kB)\nCollecting terminado>=0.8.3\n  Downloading terminado-0.17.1-py3-none-any.whl (17 kB)\nCollecting prometheus-client\n  Downloading prometheus_client-0.16.0-py3-none-any.whl (122 kB)\n\u001b[2K     \u001b[90m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m \u001b[32m122.5/122.5 kB\u001b[0m \u001b[31m13.8 MB/s\u001b[0m eta \u001b[36m0:00:00\u001b[0m\n\u001b[?25hCollecting Send2Trash>=1.8.0\n  Downloading Send2Trash-1.8.0-py3-none-any.whl (18 kB)\nRequirement already satisfied: ptyprocess>=0.5 in /anaconda/envs/azureml_py310_sdkv2/lib/python3.10/site-packages (from pexpect>4.3->ipython>=4.0.0->ipywidgets<8.0.0,>=7.0.0->azureml.widgets) (0.7.0)\nRequirement already satisfied: wcwidth in /anaconda/envs/azureml_py310_sdkv2/lib/python3.10/site-packages (from prompt-toolkit!=3.0.0,!=3.0.1,<3.1.0,>=2.0.0->ipython>=4.0.0->ipywidgets<8.0.0,>=7.0.0->azureml.widgets) (0.2.5)\nRequirement already satisfied: oauthlib>=3.0.0 in /anaconda/envs/azureml_py310_sdkv2/lib/python3.10/site-packages (from requests-oauthlib>=0.5.0->msrest>=0.7.1->azure-storage-blob>=12.6.0->azureml.widgets) (3.2.2)\nRequirement already satisfied: pure-eval in /anaconda/envs/azureml_py310_sdkv2/lib/python3.10/site-packages (from stack-data->ipython>=4.0.0->ipywidgets<8.0.0,>=7.0.0->azureml.widgets) (0.2.2)\nRequirement already satisfied: executing in /anaconda/envs/azureml_py310_sdkv2/lib/python3.10/site-packages (from stack-data->ipython>=4.0.0->ipywidgets<8.0.0,>=7.0.0->azureml.widgets) (0.8.3)\nRequirement already satisfied: asttokens in /anaconda/envs/azureml_py310_sdkv2/lib/python3.10/site-packages (from stack-data->ipython>=4.0.0->ipywidgets<8.0.0,>=7.0.0->azureml.widgets) (2.0.5)\nCollecting jupyter-server>=1.8\n  Downloading jupyter_server-2.3.0-py3-none-any.whl (365 kB)\n\u001b[2K     \u001b[90m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m \u001b[32m365.8/365.8 kB\u001b[0m \u001b[31m13.1 MB/s\u001b[0m eta \u001b[36m0:00:00\u001b[0m\n\u001b[?25hCollecting notebook-shim>=0.1.0\n  Downloading notebook_shim-0.2.2-py3-none-any.whl (13 kB)\nCollecting jupyterlab-pygments\n  Downloading jupyterlab_pygments-0.2.2-py2.py3-none-any.whl (21 kB)\nCollecting nbclient>=0.5.0\n  Downloading nbclient-0.7.2-py3-none-any.whl (71 kB)\n\u001b[2K     \u001b[90m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m \u001b[32m72.0/72.0 kB\u001b[0m \u001b[31m1.4 MB/s\u001b[0m eta \u001b[36m0:00:00\u001b[0m:00:01\u001b[0m\n\u001b[?25hCollecting defusedxml\n  Downloading defusedxml-0.7.1-py2.py3-none-any.whl (25 kB)\nCollecting tinycss2\n  Downloading tinycss2-1.2.1-py3-none-any.whl (21 kB)\nCollecting nbconvert>=5\n  Downloading nbconvert-7.2.8-py3-none-any.whl (274 kB)\n\u001b[2K     \u001b[90m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m \u001b[32m274.8/274.8 kB\u001b[0m \u001b[31m25.1 MB/s\u001b[0m eta \u001b[36m0:00:00\u001b[0m\n\u001b[?25h  Downloading nbconvert-7.2.7-py3-none-any.whl (273 kB)\n\u001b[2K     \u001b[90m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m \u001b[32m273.2/273.2 kB\u001b[0m \u001b[31m27.6 MB/s\u001b[0m eta \u001b[36m0:00:00\u001b[0m\n\u001b[?25h  Downloading nbconvert-7.2.6-py3-none-any.whl (273 kB)\n\u001b[2K     \u001b[90m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m \u001b[32m273.2/273.2 kB\u001b[0m \u001b[31m26.3 MB/s\u001b[0m eta \u001b[36m0:00:00\u001b[0m\n\u001b[?25h  Downloading nbconvert-7.2.5-py3-none-any.whl (273 kB)\n\u001b[2K     \u001b[90m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m \u001b[32m273.3/273.3 kB\u001b[0m \u001b[31m8.0 MB/s\u001b[0m eta \u001b[36m0:00:00\u001b[0m\n\u001b[?25h  Downloading nbconvert-7.2.4-py3-none-any.whl (273 kB)\n\u001b[2K     \u001b[90m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m \u001b[32m273.2/273.2 kB\u001b[0m \u001b[31m5.4 MB/s\u001b[0m eta \u001b[36m0:00:00\u001b[0m00:01\u001b[0m\n\u001b[?25h  Downloading nbconvert-7.2.3-py3-none-any.whl (273 kB)\n\u001b[2K     \u001b[90m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m \u001b[32m273.1/273.1 kB\u001b[0m \u001b[31m4.4 MB/s\u001b[0m eta \u001b[36m0:00:00\u001b[0m00:01\u001b[0m\n\u001b[?25h  Downloading nbconvert-7.2.2-py3-none-any.whl (271 kB)\n\u001b[2K     \u001b[90m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m \u001b[32m271.6/271.6 kB\u001b[0m \u001b[31m6.7 MB/s\u001b[0m eta \u001b[36m0:00:00\u001b[0m00:01\u001b[0m\n\u001b[?25h  Downloading nbconvert-7.2.1-py3-none-any.whl (271 kB)\n\u001b[2K     \u001b[90m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m \u001b[32m271.6/271.6 kB\u001b[0m \u001b[31m7.3 MB/s\u001b[0m eta \u001b[36m0:00:00\u001b[0m00:01\u001b[0m\n\u001b[?25h  Downloading nbconvert-7.1.0-py3-none-any.whl (272 kB)\n\u001b[2K     \u001b[90m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m \u001b[32m272.0/272.0 kB\u001b[0m \u001b[31m5.3 MB/s\u001b[0m eta \u001b[36m0:00:00\u001b[0m00:01\u001b[0m\n\u001b[?25h  Downloading nbconvert-7.0.0-py3-none-any.whl (271 kB)\n\u001b[2K     \u001b[90m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m \u001b[32m271.3/271.3 kB\u001b[0m \u001b[31m17.3 MB/s\u001b[0m eta \u001b[36m0:00:00\u001b[0m\n\u001b[?25h  Downloading nbconvert-6.5.4-py3-none-any.whl (563 kB)\n\u001b[2K     \u001b[90m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m \u001b[32m563.8/563.8 kB\u001b[0m \u001b[31m22.3 MB/s\u001b[0m eta \u001b[36m0:00:00\u001b[0m\n\u001b[?25hCollecting pandocfilters>=1.4.1\n  Downloading pandocfilters-1.5.0-py2.py3-none-any.whl (8.7 kB)\nCollecting lxml\n  Downloading lxml-4.9.2-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.manylinux_2_24_x86_64.whl (7.1 MB)\n\u001b[2K     \u001b[90m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m \u001b[32m7.1/7.1 MB\u001b[0m \u001b[31m70.7 MB/s\u001b[0m eta \u001b[36m0:00:00\u001b[0m:00:01\u001b[0m\n\u001b[?25hCollecting beautifulsoup4\n  Downloading beautifulsoup4-4.11.2-py3-none-any.whl (129 kB)\n\u001b[2K     \u001b[90m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m \u001b[32m129.4/129.4 kB\u001b[0m \u001b[31m8.9 MB/s\u001b[0m eta \u001b[36m0:00:00\u001b[0m\n\u001b[?25hCollecting nbconvert>=5\n  Downloading nbconvert-6.5.3-py3-none-any.whl (563 kB)\n\u001b[2K     \u001b[90m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m \u001b[32m563.8/563.8 kB\u001b[0m \u001b[31m17.1 MB/s\u001b[0m eta \u001b[36m0:00:00\u001b[0m\n\u001b[?25h  Downloading nbconvert-6.5.2-py3-none-any.whl (563 kB)\n\u001b[2K     \u001b[90m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m \u001b[32m563.8/563.8 kB\u001b[0m \u001b[31m34.8 MB/s\u001b[0m eta \u001b[36m0:00:00\u001b[0m\n\u001b[?25h  Downloading nbconvert-6.5.1-py3-none-any.whl (563 kB)\n\u001b[2K     \u001b[90m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m \u001b[32m563.8/563.8 kB\u001b[0m \u001b[31m27.5 MB/s\u001b[0m eta \u001b[36m0:00:00\u001b[0m\n\u001b[?25h  Downloading nbconvert-6.5.0-py3-none-any.whl (561 kB)\n\u001b[2K     \u001b[90m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m \u001b[32m561.6/561.6 kB\u001b[0m \u001b[31m19.9 MB/s\u001b[0m eta \u001b[36m0:00:00\u001b[0m\n\u001b[?25h  Downloading nbconvert-6.4.5-py3-none-any.whl (561 kB)\n\u001b[2K     \u001b[90m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m \u001b[32m561.4/561.4 kB\u001b[0m \u001b[31m13.9 MB/s\u001b[0m eta \u001b[36m0:00:00\u001b[0m00:01\u001b[0m\n\u001b[?25hCollecting mistune<2,>=0.8.1\n  Downloading mistune-0.8.4-py2.py3-none-any.whl (16 kB)\nCollecting nbclient<0.6.0,>=0.5.0\n  Downloading nbclient-0.5.13-py3-none-any.whl (70 kB)\n\u001b[2K     \u001b[90m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m \u001b[32m70.6/70.6 kB\u001b[0m \u001b[31m7.8 MB/s\u001b[0m eta \u001b[36m0:00:00\u001b[0m\n\u001b[?25hCollecting bleach\n  Downloading bleach-6.0.0-py3-none-any.whl (162 kB)\n\u001b[2K     \u001b[90m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m \u001b[32m162.5/162.5 kB\u001b[0m \u001b[31m11.3 MB/s\u001b[0m eta \u001b[36m0:00:00\u001b[0m\n\u001b[?25hCollecting testpath\n  Downloading testpath-0.6.0-py3-none-any.whl (83 kB)\n\u001b[2K     \u001b[90m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m \u001b[32m83.9/83.9 kB\u001b[0m \u001b[31m11.3 MB/s\u001b[0m eta \u001b[36m0:00:00\u001b[0m\n\u001b[?25hCollecting fastjsonschema\n  Downloading fastjsonschema-2.16.2-py3-none-any.whl (22 kB)\nRequirement already satisfied: jsonschema>=2.6 in /anaconda/envs/azureml_py310_sdkv2/lib/python3.10/site-packages (from nbformat->notebook>=4.4.1->widgetsnbextension~=3.6.0->ipywidgets<8.0.0,>=7.0.0->azureml.widgets) (4.17.3)\nCollecting argon2-cffi-bindings\n  Downloading argon2_cffi_bindings-21.2.0-cp36-abi3-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (86 kB)\n\u001b[2K     \u001b[90m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m \u001b[32m86.2/86.2 kB\u001b[0m \u001b[31m2.9 MB/s\u001b[0m eta \u001b[36m0:00:00\u001b[0m\n\u001b[?25hRequirement already satisfied: attrs>=17.4.0 in /anaconda/envs/azureml_py310_sdkv2/lib/python3.10/site-packages (from jsonschema>=2.6->nbformat->notebook>=4.4.1->widgetsnbextension~=3.6.0->ipywidgets<8.0.0,>=7.0.0->azureml.widgets) (22.2.0)\nRequirement already satisfied: pyrsistent!=0.17.0,!=0.17.1,!=0.17.2,>=0.14.0 in /anaconda/envs/azureml_py310_sdkv2/lib/python3.10/site-packages (from jsonschema>=2.6->nbformat->notebook>=4.4.1->widgetsnbextension~=3.6.0->ipywidgets<8.0.0,>=7.0.0->azureml.widgets) (0.19.3)\nCollecting jupyter-client<8.0\n  Downloading jupyter_client-7.4.9-py3-none-any.whl (133 kB)\n\u001b[2K     \u001b[90m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m \u001b[32m133.5/133.5 kB\u001b[0m \u001b[31m2.9 MB/s\u001b[0m eta \u001b[36m0:00:00\u001b[0m00:01\u001b[0m\n\u001b[?25hCollecting tornado<7.0,>=4.2\n  Downloading tornado-6.2-cp37-abi3-manylinux_2_5_x86_64.manylinux1_x86_64.manylinux_2_17_x86_64.manylinux2014_x86_64.whl (423 kB)\n\u001b[2K     \u001b[90m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m \u001b[32m424.0/424.0 kB\u001b[0m \u001b[31m10.1 MB/s\u001b[0m eta \u001b[36m0:00:00\u001b[0m00:01\u001b[0m\n\u001b[?25hCollecting traitlets>=4.3.1\n  Downloading traitlets-5.9.0-py3-none-any.whl (117 kB)\n\u001b[2K     \u001b[90m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m \u001b[32m117.4/117.4 kB\u001b[0m \u001b[31m6.4 MB/s\u001b[0m eta \u001b[36m0:00:00\u001b[0m\n\u001b[?25hCollecting pyzmq>=22.3\n  Downloading pyzmq-25.0.0-cp310-cp310-manylinux_2_28_x86_64.whl (1.1 MB)\n\u001b[2K     \u001b[90m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m \u001b[32m1.1/1.1 MB\u001b[0m \u001b[31m52.5 MB/s\u001b[0m eta \u001b[36m0:00:00\u001b[0m\n\u001b[?25hCollecting jupyter-server-terminals\n  Downloading jupyter_server_terminals-0.4.4-py3-none-any.whl (13 kB)\nCollecting anyio>=3.1.0\n  Downloading anyio-3.6.2-py3-none-any.whl (80 kB)\n\u001b[2K     \u001b[90m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m \u001b[32m80.6/80.6 kB\u001b[0m \u001b[31m4.5 MB/s\u001b[0m eta \u001b[36m0:00:00\u001b[0m\n\u001b[?25hCollecting jupyter-events>=0.4.0\n  Downloading jupyter_events-0.6.3-py3-none-any.whl (18 kB)\nCollecting jupyter-core>=4.9.2\n  Downloading jupyter_core-5.2.0-py3-none-any.whl (94 kB)\n\u001b[2K     \u001b[90m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m \u001b[32m94.3/94.3 kB\u001b[0m \u001b[31m6.9 MB/s\u001b[0m eta \u001b[36m0:00:00\u001b[0m\n\u001b[?25hRequirement already satisfied: platformdirs>=2.5 in /anaconda/envs/azureml_py310_sdkv2/lib/python3.10/site-packages (from jupyter-core>=4.9.2->jupyter-client<8.0->ipykernel>=4.5.1->ipywidgets<8.0.0,>=7.0.0->azureml.widgets) (2.6.2)\nCollecting soupsieve>1.2\n  Downloading soupsieve-2.4-py3-none-any.whl (37 kB)\nCollecting webencodings\n  Downloading webencodings-0.5.1-py2.py3-none-any.whl (11 kB)\nCollecting sniffio>=1.1\n  Downloading sniffio-1.3.0-py3-none-any.whl (10 kB)\nCollecting rfc3986-validator>=0.1.1\n  Downloading rfc3986_validator-0.1.1-py2.py3-none-any.whl (4.2 kB)\nCollecting rfc3339-validator\n  Downloading rfc3339_validator-0.1.4-py2.py3-none-any.whl (3.5 kB)\nCollecting python-json-logger>=2.0.4\n  Downloading python_json_logger-2.0.7-py3-none-any.whl (8.1 kB)\nCollecting webcolors>=1.11\n  Downloading webcolors-1.12-py3-none-any.whl (9.9 kB)\nCollecting isoduration\n  Downloading isoduration-20.11.0-py3-none-any.whl (11 kB)\nCollecting fqdn\n  Downloading fqdn-1.5.1-py3-none-any.whl (9.1 kB)\nCollecting jsonpointer>1.13\n  Downloading jsonpointer-2.3-py2.py3-none-any.whl (7.8 kB)\nCollecting uri-template\n  Downloading uri_template-1.2.0-py3-none-any.whl (10 kB)\nCollecting arrow>=0.15.0\n  Downloading arrow-1.2.3-py3-none-any.whl (66 kB)\n\u001b[2K     \u001b[90m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m \u001b[32m66.4/66.4 kB\u001b[0m \u001b[31m8.7 MB/s\u001b[0m eta \u001b[36m0:00:00\u001b[0m\n\u001b[?25hInstalling collected packages: webencodings, Send2Trash, mistune, ipython-genutils, fastjsonschema, applicationinsights, webcolors, uri-template, traitlets, tornado, testpath, soupsieve, sniffio, rfc3986-validator, rfc3339-validator, pyzmq, python-json-logger, prometheus-client, pandocfilters, markupsafe, jupyterlab-widgets, jupyterlab-pygments, jsonpointer, fqdn, defusedxml, bleach, terminado, jupyter-core, jinja2, cryptography, beautifulsoup4, arrow, argon2-cffi-bindings, anyio, nbformat, jupyter-server-terminals, jupyter-client, isoduration, argon2-cffi, nbclient, nbconvert, jupyter-events, jupyter-server, azureml-core, notebook-shim, azureml-telemetry, nbclassic, notebook, widgetsnbextension, ipywidgets, azureml.widgets\n  Attempting uninstall: traitlets\n    Found existing installation: traitlets 5.1.1\n    Uninstalling traitlets-5.1.1:\n      Successfully uninstalled traitlets-5.1.1\n  Attempting uninstall: tornado\n    Found existing installation: tornado 6.1\n    Uninstalling tornado-6.1:\n      Successfully uninstalled tornado-6.1\n  Attempting uninstall: pyzmq\n    Found existing installation: pyzmq 23.2.0\n    Uninstalling pyzmq-23.2.0:\n      Successfully uninstalled pyzmq-23.2.0\n  Attempting uninstall: markupsafe\n    Found existing installation: MarkupSafe 2.1.2\n    Uninstalling MarkupSafe-2.1.2:\n      Successfully uninstalled MarkupSafe-2.1.2\n  Attempting uninstall: jupyter-core\n    Found existing installation: jupyter-core 4.10.0\n    Uninstalling jupyter-core-4.10.0:\n      Successfully uninstalled jupyter-core-4.10.0\n  Attempting uninstall: jinja2\n    Found existing installation: Jinja2 3.1.2\n    Uninstalling Jinja2-3.1.2:\n      Successfully uninstalled Jinja2-3.1.2\n  Attempting uninstall: cryptography\n    Found existing installation: cryptography 39.0.0\n    Uninstalling cryptography-39.0.0:\n      Successfully uninstalled cryptography-39.0.0\n  Attempting uninstall: jupyter-client\n    Found existing installation: jupyter-client 7.2.2\n    Uninstalling jupyter-client-7.2.2:\n      Successfully uninstalled jupyter-client-7.2.2\n  Attempting uninstall: azureml-core\n    Found existing installation: azureml-core 1.48.0\n    Uninstalling azureml-core-1.48.0:\n      Successfully uninstalled azureml-core-1.48.0\n\u001b[31mERROR: pip's dependency resolver does not currently take into account all the packages that are installed. This behaviour is the source of the following dependency conflicts.\nwerkzeug 2.2.2 requires MarkupSafe>=2.1.1, but you have markupsafe 2.0.1 which is incompatible.\nflask 2.2.2 requires Jinja2>=3.0, but you have jinja2 2.11.2 which is incompatible.\nazureml-mlflow 1.48.0 requires azure-storage-blob<=12.13.0,>=12.5.0, but you have azure-storage-blob 12.14.1 which is incompatible.\u001b[0m\u001b[31m\n\u001b[0mSuccessfully installed Send2Trash-1.8.0 anyio-3.6.2 applicationinsights-0.11.10 argon2-cffi-21.3.0 argon2-cffi-bindings-21.2.0 arrow-1.2.3 azureml-core-1.49.0 azureml-telemetry-1.49.0 azureml.widgets-1.49.0 beautifulsoup4-4.11.2 bleach-6.0.0 cryptography-38.0.4 defusedxml-0.7.1 fastjsonschema-2.16.2 fqdn-1.5.1 ipython-genutils-0.2.0 ipywidgets-7.7.3 isoduration-20.11.0 jinja2-2.11.2 jsonpointer-2.3 jupyter-client-7.4.9 jupyter-core-5.2.0 jupyter-events-0.6.3 jupyter-server-2.3.0 jupyter-server-terminals-0.4.4 jupyterlab-pygments-0.2.2 jupyterlab-widgets-1.1.2 markupsafe-2.0.1 mistune-0.8.4 nbclassic-0.5.2 nbclient-0.5.13 nbconvert-6.4.5 nbformat-5.7.3 notebook-6.5.2 notebook-shim-0.2.2 pandocfilters-1.5.0 prometheus-client-0.16.0 python-json-logger-2.0.7 pyzmq-25.0.0 rfc3339-validator-0.1.4 rfc3986-validator-0.1.1 sniffio-1.3.0 soupsieve-2.4 terminado-0.17.1 testpath-0.6.0 tornado-6.2 traitlets-5.9.0 uri-template-1.2.0 webcolors-1.12 webencodings-0.5.1 widgetsnbextension-3.6.2\nNote: you may need to restart the kernel to use updated packages.\n"
        }
      ],
      "execution_count": 15,
      "metadata": {
        "jupyter": {
          "source_hidden": false,
          "outputs_hidden": false
        },
        "nteract": {
          "transient": {
            "deleting": false
          }
        },
        "gather": {
          "logged": 1677126637252
        }
      }
    },
    {
      "cell_type": "code",
      "source": [
        "# Load Libraries\r\n",
        "\r\n",
        "import azureml.core\r\n",
        "from azureml.core import Workspace\r\n",
        "\r\n",
        "import os, shutil\r\n",
        "\r\n",
        "from azureml.core.compute import ComputeTarget, AmlCompute\r\n",
        "from azureml.core.compute_target import ComputeTargetException\r\n",
        "\r\n",
        "from azureml.core import Experiment, ScriptRunConfig, Environment\r\n",
        "from azureml.core.runconfig import DockerConfiguration\r\n",
        "from azureml.widgets import RunDetails\r\n",
        "\r\n",
        "from azureml.core import Model\r\n"
      ],
      "outputs": [],
      "execution_count": 16,
      "metadata": {
        "gather": {
          "logged": 1677126637543
        }
      }
    },
    {
      "cell_type": "code",
      "source": [
        "# Load the workspace from the saved config file\r\n",
        "ws = Workspace.from_config()\r\n",
        "print('Ready to use Azure ML {} to work with {}'.format(azureml.core.VERSION, ws.name))\r\n",
        "     "
      ],
      "outputs": [
        {
          "output_type": "stream",
          "name": "stdout",
          "text": "Ready to use Azure ML 1.48.0 to work with testerinos\n"
        }
      ],
      "execution_count": 5,
      "metadata": {
        "jupyter": {
          "source_hidden": false,
          "outputs_hidden": false
        },
        "nteract": {
          "transient": {
            "deleting": false
          }
        },
        "gather": {
          "logged": 1677249693723
        }
      }
    },
    {
      "cell_type": "code",
      "source": [
        "# Create a folder for the experiment files\r\n",
        "training_folder = 'insurance-training'\r\n",
        "os.makedirs(training_folder, exist_ok=True)\r\n"
      ],
      "outputs": [],
      "execution_count": 6,
      "metadata": {
        "jupyter": {
          "source_hidden": false,
          "outputs_hidden": false
        },
        "nteract": {
          "transient": {
            "deleting": false
          }
        },
        "gather": {
          "logged": 1677249704681
        }
      }
    },
    {
      "cell_type": "code",
      "source": [
        "# Copy the data file into the experiment folder\r\n",
        "shutil.copy('data/insurance.csv', os.path.join(training_folder, \"insurance.csv\"))"
      ],
      "outputs": [
        {
          "output_type": "execute_result",
          "execution_count": 7,
          "data": {
            "text/plain": "'insurance-training/insurance.csv'"
          },
          "metadata": {}
        }
      ],
      "execution_count": 7,
      "metadata": {
        "jupyter": {
          "source_hidden": false,
          "outputs_hidden": false
        },
        "nteract": {
          "transient": {
            "deleting": false
          }
        },
        "gather": {
          "logged": 1677249704918
        }
      }
    },
    {
      "cell_type": "code",
      "source": [
        "%%writefile environment/environment.yml\r\n",
        "\r\n",
        "\r\n",
        "# Conda environment specification. The dependencies defined in this file will\r\n",
        "# be automatically provisioned for runs with userManagedDependencies=False.\r\n",
        "\r\n",
        "# Details about the Conda environment file format:\r\n",
        "# https://conda.io/docs/user-guide/tasks/manage-environments.html#create-env-file-manually\r\n",
        "\r\n",
        "name: simple_environment\r\n",
        "dependencies:\r\n",
        "  # The python interpreter version.\r\n",
        "  # Currently Azure ML only supports 3.5.2 and later.\r\n",
        "- python=3.6.2\r\n",
        "- scikit-learn\r\n",
        "- pandas\r\n",
        "- pip\r\n",
        "- pip:\r\n",
        "  - azureml-defaults\r\n",
        "  - azureml-mlflow"
      ],
      "outputs": [
        {
          "output_type": "stream",
          "name": "stdout",
          "text": "Overwriting environment/environment.yml\n"
        }
      ],
      "execution_count": 8,
      "metadata": {
        "jupyter": {
          "source_hidden": false,
          "outputs_hidden": false
        },
        "nteract": {
          "transient": {
            "deleting": false
          }
        }
      }
    },
    {
      "cell_type": "code",
      "source": [
        "%%writefile $training_folder/insurance_training.py\r\n",
        "\r\n",
        "# Import libraries\r\n",
        "from azureml.core import Run\r\n",
        "import pandas as pd\r\n",
        "import numpy as np\r\n",
        "import joblib\r\n",
        "import os\r\n",
        "from sklearn.model_selection import train_test_split\r\n",
        "from sklearn.linear_model import LinearRegression\r\n",
        "from sklearn.metrics import mean_squared_error\r\n",
        "\r\n",
        "# Get the experiment run context\r\n",
        "run = Run.get_context()\r\n",
        "\r\n",
        "# load the dataset\r\n",
        "print(\"Loading Data...\")\r\n",
        "df = pd.read_csv('insurance.csv')\r\n",
        "\r\n",
        "# Separate features and labels\r\n",
        "X = df[['age','bmi','children']].values\r\n",
        "y = df['charges'].values\r\n",
        "\r\n",
        "# Split data into training set and test set\r\n",
        "X_train, X_test, y_train, y_test = train_test_split(X, y, test_size=0.2, random_state=42)\r\n",
        "\r\n",
        "# Build and Train the Model\r\n",
        "model = LinearRegression().fit(X_train, y_train)\r\n",
        "\r\n",
        "# Predict\r\n",
        "y_pred = model.predict(X_test)\r\n",
        "\r\n",
        "# calculate r2\r\n",
        "r2 = model.score(X_test, y_test)\r\n",
        "run.log('r2', round(r2,2))\r\n",
        "\r\n",
        "# calculate rmse\r\n",
        "rmse = mean_squared_error(y_test, y_pred)\r\n",
        "run.log('RMSE', np.float(rmse))\r\n",
        "\r\n",
        "# Save the trained model in the outputs folder\r\n",
        "os.makedirs('outputs', exist_ok=True)\r\n",
        "joblib.dump(value=model, filename='outputs/insurance_model.pkl')\r\n",
        "\r\n",
        "run.complete()"
      ],
      "outputs": [
        {
          "output_type": "stream",
          "name": "stdout",
          "text": "Overwriting insurance-training/insurance_training.py\n"
        }
      ],
      "execution_count": 9,
      "metadata": {
        "jupyter": {
          "source_hidden": false,
          "outputs_hidden": false
        },
        "nteract": {
          "transient": {
            "deleting": false
          }
        }
      }
    },
    {
      "cell_type": "code",
      "source": [
        "## Provision Compute Cluster or use existing\r\n",
        "\r\n",
        "cluster_name = \"sweetcluster\"\r\n",
        "\r\n",
        "try:\r\n",
        "    # Check for existing compute target\r\n",
        "    training_cluster = ComputeTarget(workspace=ws, name=cluster_name)\r\n",
        "    print('Found existing cluster, use it.')\r\n",
        "except ComputeTargetException:\r\n",
        "    # If it doesn't already exist, create it\r\n",
        "    try:\r\n",
        "        compute_config = AmlCompute.provisioning_configuration(vm_size='STANDARD_DS11_V2', max_nodes=2)\r\n",
        "        training_cluster = ComputeTarget.create(ws, cluster_name, compute_config)\r\n",
        "        training_cluster.wait_for_completion(show_output=True)\r\n",
        "    except Exception as ex:\r\n",
        "        print(ex)"
      ],
      "outputs": [
        {
          "output_type": "stream",
          "name": "stdout",
          "text": "InProgress.\nSucceededProvisioning operation finished, operation \"Succeeded\"\nSucceeded\nAmlCompute wait for completion finished\n\nMinimum number of nodes requested have been provisioned\n"
        }
      ],
      "execution_count": 10,
      "metadata": {
        "jupyter": {
          "source_hidden": false,
          "outputs_hidden": false
        },
        "nteract": {
          "transient": {
            "deleting": false
          }
        },
        "gather": {
          "logged": 1677249711332
        }
      }
    },
    {
      "cell_type": "markdown",
      "source": [
        "## Run the training script as an experiment\r\n",
        "\r\n",
        "Using ScriptRunConfig, parameters are gathered to run the experiment. With the env variable, the yaml file essentially contains instructions on how to build these virtualized containers.  These containers will run on the compute cluster defined above.  AzureML will first provision the compute instances of the cluster and then create containers. This will take some time for set-up.  Afterwards, it will shortly execute the training script to generate a model and results. By using environments, we are creating a repeatable process to run code."
      ],
      "metadata": {
        "nteract": {
          "transient": {
            "deleting": false
          }
        }
      }
    },
    {
      "cell_type": "code",
      "source": [
        "\r\n",
        "\r\n",
        "# Create a Python environment for the experiment (from a .yml file)\r\n",
        "env = Environment.from_conda_specification(\"experiment_env\", \"environment/environment.yml\")\r\n",
        "\r\n",
        "# Create a script config\r\n",
        "script_config = ScriptRunConfig(source_directory= training_folder,\r\n",
        "                                script='insurance_training.py',\r\n",
        "                                environment=env,\r\n",
        "                                docker_runtime_config=DockerConfiguration(use_docker=True),\r\n",
        "                                compute_target=cluster_name) \r\n",
        "\r\n",
        "# submit the experiment run\r\n",
        "experiment_name = 'mslearn-train-insurance'\r\n",
        "experiment = Experiment(workspace=ws, name=experiment_name)\r\n",
        "run = experiment.submit(config=script_config)\r\n",
        "\r\n",
        "# Show the running experiment run in the notebook widget\r\n",
        "RunDetails(run).show()\r\n",
        "\r\n",
        "# Block until the experiment run has completed\r\n",
        "run.wait_for_completion()"
      ],
      "outputs": [
        {
          "output_type": "display_data",
          "data": {
            "text/plain": "_UserRunWidget(widget_settings={'childWidgetDisplay': 'popup', 'send_telemetry': False, 'log_level': 'INFO', '…",
            "application/vnd.jupyter.widget-view+json": {
              "version_major": 2,
              "version_minor": 0,
              "model_id": "4c9be342fe1343309c42090a6784cbd1"
            }
          },
          "metadata": {}
        },
        {
          "output_type": "display_data",
          "data": {
            "application/aml.mini.widget.v1": "{\"status\": \"Completed\", \"workbench_run_details_uri\": \"https://ml.azure.com/runs/mslearn-train-insurance_1677249712_1d12aba6?wsid=/subscriptions/71fa0172-ce90-403c-94a9-14ce1e88f56a/resourcegroups/rg_eastus_44930_1_1677248835383/workspaces/testerinos&tid=82676786-5bc7-43c6-b8f8-b3ee02b0b5f3\", \"run_id\": \"mslearn-train-insurance_1677249712_1d12aba6\", \"run_properties\": {\"run_id\": \"mslearn-train-insurance_1677249712_1d12aba6\", \"created_utc\": \"2023-02-24T14:41:56.493371Z\", \"properties\": {\"_azureml.ComputeTargetType\": \"amlctrain\", \"ContentSnapshotId\": \"aa476604-ded5-423b-b98b-791bd63d2225\", \"ProcessInfoFile\": \"azureml-logs/process_info.json\", \"ProcessStatusFile\": \"azureml-logs/process_status.json\"}, \"tags\": {\"_aml_system_ComputeTargetStatus\": \"{\\\"AllocationState\\\":\\\"steady\\\",\\\"PreparingNodeCount\\\":0,\\\"RunningNodeCount\\\":0,\\\"CurrentNodeCount\\\":0}\", \"mlflow.source.type\": \"JOB\", \"mlflow.source.name\": \"insurance_training.py\"}, \"script_name\": null, \"arguments\": null, \"end_time_utc\": \"2023-02-24T14:56:47.783147Z\", \"status\": \"Completed\", \"log_files\": {\"azureml-logs/20_image_build_log.txt\": \"https://testerinos9425848700.blob.core.windows.net/azureml/ExperimentRun/dcid.mslearn-train-insurance_1677249712_1d12aba6/azureml-logs/20_image_build_log.txt?sv=2019-07-07&sr=b&sig=3WKcWcfKXaA6ev41xaecnpAGgpjawIopl3OiBHG9eig%3D&skoid=a310c481-83a8-4f6b-a2d7-27947d69d9e1&sktid=82676786-5bc7-43c6-b8f8-b3ee02b0b5f3&skt=2023-02-24T14%3A31%3A57Z&ske=2023-02-25T22%3A41%3A57Z&sks=b&skv=2019-07-07&st=2023-02-24T14%3A52%3A26Z&se=2023-02-24T23%3A02%3A26Z&sp=r\", \"user_logs/std_log.txt\": \"https://testerinos9425848700.blob.core.windows.net/azureml/ExperimentRun/dcid.mslearn-train-insurance_1677249712_1d12aba6/user_logs/std_log.txt?sv=2019-07-07&sr=b&sig=9pixrPPXPpFgb82AHsLc01tx5pUz0pKAcCOoWq1lZPQ%3D&skoid=a310c481-83a8-4f6b-a2d7-27947d69d9e1&sktid=82676786-5bc7-43c6-b8f8-b3ee02b0b5f3&skt=2023-02-24T14%3A31%3A57Z&ske=2023-02-25T22%3A41%3A57Z&sks=b&skv=2019-07-07&st=2023-02-24T14%3A54%3A07Z&se=2023-02-24T23%3A04%3A07Z&sp=r\", \"system_logs/cs_capability/cs-capability.log\": \"https://testerinos9425848700.blob.core.windows.net/azureml/ExperimentRun/dcid.mslearn-train-insurance_1677249712_1d12aba6/system_logs/cs_capability/cs-capability.log?sv=2019-07-07&sr=b&sig=xqQrlWTy7riKdcQpNWbwzdMa5XPa3iFc0kxf65ScUqA%3D&skoid=a310c481-83a8-4f6b-a2d7-27947d69d9e1&sktid=82676786-5bc7-43c6-b8f8-b3ee02b0b5f3&skt=2023-02-24T14%3A31%3A57Z&ske=2023-02-25T22%3A41%3A57Z&sks=b&skv=2019-07-07&st=2023-02-24T14%3A54%3A07Z&se=2023-02-24T23%3A04%3A07Z&sp=r\", \"system_logs/hosttools_capability/hosttools-capability.log\": \"https://testerinos9425848700.blob.core.windows.net/azureml/ExperimentRun/dcid.mslearn-train-insurance_1677249712_1d12aba6/system_logs/hosttools_capability/hosttools-capability.log?sv=2019-07-07&sr=b&sig=qYSxDGfAcAFpHcyfgQ8ox72QmRJ6XypNAd6T1SfHXNY%3D&skoid=a310c481-83a8-4f6b-a2d7-27947d69d9e1&sktid=82676786-5bc7-43c6-b8f8-b3ee02b0b5f3&skt=2023-02-24T14%3A31%3A57Z&ske=2023-02-25T22%3A41%3A57Z&sks=b&skv=2019-07-07&st=2023-02-24T14%3A54%3A07Z&se=2023-02-24T23%3A04%3A07Z&sp=r\", \"system_logs/lifecycler/execution-wrapper.log\": \"https://testerinos9425848700.blob.core.windows.net/azureml/ExperimentRun/dcid.mslearn-train-insurance_1677249712_1d12aba6/system_logs/lifecycler/execution-wrapper.log?sv=2019-07-07&sr=b&sig=%2Ft15DjseHIuXyuVzwEKUSSMPu3YlawuCyJFfXdjhTGY%3D&skoid=a310c481-83a8-4f6b-a2d7-27947d69d9e1&sktid=82676786-5bc7-43c6-b8f8-b3ee02b0b5f3&skt=2023-02-24T14%3A31%3A57Z&ske=2023-02-25T22%3A41%3A57Z&sks=b&skv=2019-07-07&st=2023-02-24T14%3A54%3A07Z&se=2023-02-24T23%3A04%3A07Z&sp=r\", \"system_logs/lifecycler/lifecycler.log\": \"https://testerinos9425848700.blob.core.windows.net/azureml/ExperimentRun/dcid.mslearn-train-insurance_1677249712_1d12aba6/system_logs/lifecycler/lifecycler.log?sv=2019-07-07&sr=b&sig=J3d4Isx8NLC11E1ebgpz9HS5z0XASZiq6a4uXsu1xqk%3D&skoid=a310c481-83a8-4f6b-a2d7-27947d69d9e1&sktid=82676786-5bc7-43c6-b8f8-b3ee02b0b5f3&skt=2023-02-24T14%3A31%3A57Z&ske=2023-02-25T22%3A41%3A57Z&sks=b&skv=2019-07-07&st=2023-02-24T14%3A54%3A07Z&se=2023-02-24T23%3A04%3A07Z&sp=r\", \"system_logs/metrics_capability/metrics-capability.log\": \"https://testerinos9425848700.blob.core.windows.net/azureml/ExperimentRun/dcid.mslearn-train-insurance_1677249712_1d12aba6/system_logs/metrics_capability/metrics-capability.log?sv=2019-07-07&sr=b&sig=4yp0LimGD4XOmAgWk7jvZRB2Ca7Ec5z56BiT%2FKCJ1qY%3D&skoid=a310c481-83a8-4f6b-a2d7-27947d69d9e1&sktid=82676786-5bc7-43c6-b8f8-b3ee02b0b5f3&skt=2023-02-24T14%3A31%3A57Z&ske=2023-02-25T22%3A41%3A57Z&sks=b&skv=2019-07-07&st=2023-02-24T14%3A54%3A07Z&se=2023-02-24T23%3A04%3A07Z&sp=r\", \"system_logs/snapshot_capability/snapshot-capability.log\": \"https://testerinos9425848700.blob.core.windows.net/azureml/ExperimentRun/dcid.mslearn-train-insurance_1677249712_1d12aba6/system_logs/snapshot_capability/snapshot-capability.log?sv=2019-07-07&sr=b&sig=CFlDAEdukehcrjyF7VqY18zSegsZZxKfnn12hHUoX8s%3D&skoid=a310c481-83a8-4f6b-a2d7-27947d69d9e1&sktid=82676786-5bc7-43c6-b8f8-b3ee02b0b5f3&skt=2023-02-24T14%3A31%3A57Z&ske=2023-02-25T22%3A41%3A57Z&sks=b&skv=2019-07-07&st=2023-02-24T14%3A54%3A07Z&se=2023-02-24T23%3A04%3A07Z&sp=r\"}, \"log_groups\": [[\"user_logs/std_log.txt\", \"system_logs/cs_capability/cs-capability.log\", \"system_logs/hosttools_capability/hosttools-capability.log\", \"system_logs/lifecycler/execution-wrapper.log\", \"system_logs/lifecycler/lifecycler.log\", \"system_logs/metrics_capability/metrics-capability.log\", \"system_logs/snapshot_capability/snapshot-capability.log\"], [\"azureml-logs/20_image_build_log.txt\"]], \"run_duration\": \"0:14:51\", \"run_number\": \"1677249716\", \"run_queued_details\": {\"status\": \"Completed\", \"details\": null}}, \"child_runs\": [], \"children_metrics\": {}, \"run_metrics\": [{\"name\": \"r2\", \"run_id\": \"mslearn-train-insurance_1677249712_1d12aba6\", \"categories\": [0], \"series\": [{\"data\": [0.15]}]}, {\"name\": \"RMSE\", \"run_id\": \"mslearn-train-insurance_1677249712_1d12aba6\", \"categories\": [0], \"series\": [{\"data\": [131201335.64669806]}]}], \"run_logs\": \"2023/02/24 14:42:12 Downloading source code...\\r\\n2023/02/24 14:42:13 Finished downloading source code\\r\\n2023/02/24 14:42:13 Creating Docker network: acb_default_network, driver: 'bridge'\\n2023/02/24 14:42:13 Successfully set up Docker network: acb_default_network\\n2023/02/24 14:42:13 Setting up Docker configuration...\\n2023/02/24 14:42:14 Successfully set up Docker configuration\\n2023/02/24 14:42:14 Logging in to registry: 295d6fb9a9d4485db142b510aa43ff02.azurecr.io\\n2023/02/24 14:42:15 Successfully logged into 295d6fb9a9d4485db142b510aa43ff02.azurecr.io\\n2023/02/24 14:42:15 Executing step ID: acb_step_0. Timeout(sec): 5400, Working directory: '', Network: 'acb_default_network'\\n2023/02/24 14:42:15 Scanning for dependencies...\\n2023/02/24 14:42:15 Successfully scanned dependencies\\n2023/02/24 14:42:15 Launching container with name: acb_step_0\\r\\nSending build context to Docker daemon  71.68kB\\r\\r\\nStep 1/21 : FROM mcr.microsoft.com/azureml/openmpi4.1.0-ubuntu20.04:20221101.v1@sha256:4505a963b2d34a42b5eaef48b8142ca98123d05d3a95eee3fe57551570a70e3b\\nmcr.microsoft.com/azureml/openmpi4.1.0-ubuntu20.04:20221101.v1@sha256:4505a963b2d34a42b5eaef48b8142ca98123d05d3a95eee3fe57551570a70e3b: Pulling from azureml/openmpi4.1.0-ubuntu20.04\\nd7bfe07ed847: Pulling fs layer\\nd1327a17a430: Pulling fs layer\\n69a9739a8058: Pulling fs layer\\n1551e9d33102: Pulling fs layer\\n726392826fd2: Pulling fs layer\\n6ed0c5c30145: Pulling fs layer\\nea261e5684f6: Pulling fs layer\\n21207d3ea9d3: Pulling fs layer\\nc9a742e394f6: Pulling fs layer\\nb0c9de384791: Pulling fs layer\\n1551e9d33102: Waiting\\n726392826fd2: Waiting\\n6ed0c5c30145: Waiting\\nea261e5684f6: Waiting\\n21207d3ea9d3: Waiting\\nc9a742e394f6: Waiting\\nb0c9de384791: Waiting\\nd7bfe07ed847: Verifying Checksum\\nd7bfe07ed847: Download complete\\n69a9739a8058: Verifying Checksum\\n69a9739a8058: Download complete\\n726392826fd2: Verifying Checksum\\n726392826fd2: Download complete\\n1551e9d33102: Verifying Checksum\\n1551e9d33102: Download complete\\nea261e5684f6: Verifying Checksum\\nea261e5684f6: Download complete\\n21207d3ea9d3: Verifying Checksum\\n21207d3ea9d3: Download complete\\r\\n6ed0c5c30145: Verifying Checksum\\n6ed0c5c30145: Download complete\\nc9a742e394f6: Verifying Checksum\\nc9a742e394f6: Download complete\\nb0c9de384791: Verifying Checksum\\nb0c9de384791: Download complete\\nd1327a17a430: Verifying Checksum\\nd1327a17a430: Download complete\\nd7bfe07ed847: Pull complete\\nd1327a17a430: Pull complete\\r\\n69a9739a8058: Pull complete\\n1551e9d33102: Pull complete\\n726392826fd2: Pull complete\\n6ed0c5c30145: Pull complete\\r\\nea261e5684f6: Pull complete\\n21207d3ea9d3: Pull complete\\nc9a742e394f6: Pull complete\\nb0c9de384791: Pull complete\\nDigest: sha256:4505a963b2d34a42b5eaef48b8142ca98123d05d3a95eee3fe57551570a70e3b\\nStatus: Downloaded newer image for mcr.microsoft.com/azureml/openmpi4.1.0-ubuntu20.04:20221101.v1@sha256:4505a963b2d34a42b5eaef48b8142ca98123d05d3a95eee3fe57551570a70e3b\\n ---> b6fd6a8d28e9\\nStep 2/21 : USER root\\n ---> Running in 85b9df313ff8\\nRemoving intermediate container 85b9df313ff8\\n ---> dd78bc85e53b\\nStep 3/21 : RUN mkdir -p $HOME/.cache\\r\\n ---> Running in 302de4d89aa8\\nRemoving intermediate container 302de4d89aa8\\n ---> 4f6a68cdb0e1\\nStep 4/21 : WORKDIR /\\n ---> Running in 8fc60214f022\\nRemoving intermediate container 8fc60214f022\\n ---> bb09fc2d88c8\\nStep 5/21 : COPY azureml-environment-setup/99brokenproxy /etc/apt/apt.conf.d/\\r\\n ---> e93bcffdae82\\nStep 6/21 : RUN if dpkg --compare-versions `conda --version | grep -oE '[^ ]+$'` lt 4.4.11; then conda install conda==4.4.11; fi\\n ---> Running in 92a444d18e8f\\nRemoving intermediate container 92a444d18e8f\\n ---> 17826a13221e\\nStep 7/21 : COPY azureml-environment-setup/mutated_conda_dependencies.yml azureml-environment-setup/mutated_conda_dependencies.yml\\r\\n ---> c85a9a0c0e8a\\nStep 8/21 : RUN ldconfig /usr/local/cuda/lib64/stubs && conda env create -p /azureml-envs/azureml_809a074975457de1dd27bdfcf2d79d61 -f azureml-environment-setup/mutated_conda_dependencies.yml && rm -rf \\\"$HOME/.cache/pip\\\" && conda clean -aqy && CONDA_ROOT_DIR=$(conda info --root) && rm -rf \\\"$CONDA_ROOT_DIR/pkgs\\\" && find \\\"$CONDA_ROOT_DIR\\\" -type d -name __pycache__ -exec rm -rf {} + && ldconfig\\n ---> Running in bf22488f5134\\nCollecting package metadata (repodata.json): ...working... done\\r\\nSolving environment: ...working... done\\r\\n\\nDownloading and Extracting Packages\\n\\rnumpy-1.19.2         | 22 KB     |            |   0% \\rnumpy-1.19.2         | 22 KB     | ########## | 100% \\n\\rlibgomp-11.2.0       | 474 KB    |            |   0% \\rlibgomp-11.2.0       | 474 KB    | ########## | 100% \\n\\rpython-dateutil-2.8. | 233 KB    |            |   0% \\rpython-dateutil-2.8. | 233 KB    | ########## | 100% \\n\\rlibgfortran-ng-7.5.0 | 22 KB     |            |   0% \\rlibgfortran-ng-7.5.0 | 22 KB     | ########## | 100% \\n\\rpandas-1.1.5         | 8.2 MB    |            |   0% \\rpandas-1.1.5         | 8.2 MB    | ########## | 100% \\rpandas-1.1.5         | 8.2 MB    | ########## | 100% \\n\\rscipy-1.5.2          | 14.4 MB   |            |   0% \\rscipy-1.5.2          | 14.4 MB   | ###6       |  37% \\rscipy-1.5.2          | 14.4 MB   | ########## | 100% \\rscipy-1.5.2          | 14.4 MB   | ########## | 100% \\n\\rpytz-2021.3          | 171 KB    |            |   0% \\rpytz-2021.3          | 171 KB    | ########## | 100% \\n\\rnumpy-base-1.19.2    | 4.1 MB    |            |   0% \\rnumpy-base-1.19.2    | 4.1 MB    | ########## | 100% \\rnumpy-base-1.19.2    | 4.1 MB    | ########## | 100% \\n\\rmkl-2020.2           | 138.3 MB  |            |   0% \\rmkl-2020.2           | 138.3 MB  | 6          |   7% \\rmkl-2020.2           | 138.3 MB  | #4         |  15% \\rmkl-2020.2           | 138.3 MB  | ##2        |  23% \\rmkl-2020.2           | 138.3 MB  | ###        |  30% \\rmkl-2020.2           | 138.3 MB  | ###8       |  38% \\rmkl-2020.2           | 138.3 MB  | ####6      |  46% \\rmkl-2020.2           | 138.3 MB  | #####4     |  55% \\rmkl-2020.2           | 138.3 MB  | ######5    |  65% \\rmkl-2020.2           | 138.3 MB  | #######4   |  75% \\rmkl-2020.2           | 138.3 MB  | ########4  |  85% \\rmkl-2020.2           | 138.3 MB  | #########4 |  95% \\rmkl-2020.2           | 138.3 MB  | ########## | 100% \\r\\n\\rzlib-1.2.13          | 103 KB    |            |   0% \\rzlib-1.2.13          | 103 KB    | ########## | 100% \\n\\rlibffi-3.2.1         | 48 KB     |            |   0% \\rlibffi-3.2.1         | 48 KB     | ########## | 100% \\n\\rsqlite-3.23.1        | 808 KB    |            |   0% \\rsqlite-3.23.1        | 808 KB    | ########## | 100% \\n\\ropenssl-1.0.2u       | 2.2 MB    |            |   0% \\ropenssl-1.0.2u       | 2.2 MB    | ########## | 100% \\n\\rtk-8.6.12            | 3.0 MB    |            |   0% \\rtk-8.6.12            | 3.0 MB    | ########## | 100% \\rtk-8.6.12            | 3.0 MB    | ########## | 100% \\n\\rsetuptools-58.0.4    | 788 KB    |            |   0% \\rsetuptools-58.0.4    | 788 KB    | ########## | 100% \\n\\rlibstdcxx-ng-11.2.0  | 4.7 MB    |            |   0% \\rlibstdcxx-ng-11.2.0  | 4.7 MB    | ########## | 100% \\rlibstdcxx-ng-11.2.0  | 4.7 MB    | ########## | 100% \\n\\rthreadpoolctl-2.2.0  | 16 KB     |            |   0% \\rthreadpoolctl-2.2.0  | 16 KB     | ########## | 100% \\n\\rmkl_random-1.1.1     | 327 KB    |            |   0% \\rmkl_random-1.1.1     | 327 KB    | ########## | 100% \\n\\r_libgcc_mutex-0.1    | 3 KB      |            |   0% \\r_libgcc_mutex-0.1    | 3 KB      | ########## | 100% \\n\\rncurses-6.0          | 781 KB    |            |   0% \\rncurses-6.0          | 781 KB    | ########## | 100% \\rncurses-6.0          | 781 KB    | ########## | 100% \\n\\rca-certificates-2023 | 120 KB    |            |   0% \\rca-certificates-2023 | 120 KB    | ########## | 100% \\n\\rblas-1.0             | 6 KB      |            |   0% \\rblas-1.0             | 6 KB      | ########## | 100% \\n\\rpip-21.2.2           | 1.8 MB    |            |   0% \\rpip-21.2.2           | 1.8 MB    | ########## | 100% \\rpip-21.2.2           | 1.8 MB    | ########## | 100% \\n\\rscikit-learn-0.24.2  | 5.2 MB    |            |   0% \\rscikit-learn-0.24.2  | 5.2 MB    | ########## | 100% \\rscikit-learn-0.24.2  | 5.2 MB    | ########## | 100% \\n\\rlibgfortran4-7.5.0   | 995 KB    |            |   0% \\rlibgfortran4-7.5.0   | 995 KB    | ########## | 100% \\n\\rjoblib-1.0.1         | 208 KB    |            |   0% \\rjoblib-1.0.1         | 208 KB    | ########## | 100% \\n\\rintel-openmp-2022.1. | 4.5 MB    |            |   0% \\rintel-openmp-2022.1. | 4.5 MB    | ########## | 100% \\rintel-openmp-2022.1. | 4.5 MB    | ########## | 100% \\n\\rxz-5.2.10            | 429 KB    |            |   0% \\rxz-5.2.10            | 429 KB    | ########## | 100% \\n\\rlibgcc-ng-11.2.0     | 5.3 MB    |            |   0% \\rlibgcc-ng-11.2.0     | 5.3 MB    | ########## | 100% \\rlibgcc-ng-11.2.0     | 5.3 MB    | ########## | 100% \\n\\rmkl_fft-1.3.0        | 170 KB    |            |   0% \\rmkl_fft-1.3.0        | 170 KB    | ########## | 100% \\n\\rwheel-0.37.1         | 33 KB     |            |   0% \\rwheel-0.37.1         | 33 KB     | ########## | 100% \\n\\r_openmp_mutex-5.1    | 21 KB     |            |   0% \\r_openmp_mutex-5.1    | 21 KB     | ########## | 100% \\r\\n\\rmkl-service-2.3.0    | 52 KB     |            |   0% \\rmkl-service-2.3.0    | 52 KB     | ########## | 100% \\n\\rlibedit-3.1          | 151 KB    |            |   0% \\rlibedit-3.1          | 151 KB    | ########## | 100% \\n\\rsix-1.16.0           | 18 KB     |            |   0% \\rsix-1.16.0           | 18 KB     | ########## | 100% \\n\\rreadline-7.0         | 848 KB    |            |   0% \\rreadline-7.0         | 848 KB    | ########## | 100% \\n\\rcertifi-2021.5.30    | 139 KB    |            |   0% \\rcertifi-2021.5.30    | 139 KB    | ########## | 100% \\n\\rpython-3.6.2         | 23.6 MB   |            |   0% \\rpython-3.6.2         | 23.6 MB   | ####       |  41% \\rpython-3.6.2         | 23.6 MB   | ########## | 100% \\rpython-3.6.2         | 23.6 MB   | ########## | 100% \\nPreparing transaction: ...working... done\\nVerifying transaction: ...working... done\\r\\nExecuting transaction: ...working... \\n\\n    Installed package of scikit-learn can be accelerated using scikit-learn-intelex.\\n    More details are available here: https://intel.github.io/scikit-learn-intelex\\n\\n    For example:\\n\\n        $ conda install scikit-learn-intelex\\n        $ python -m sklearnex my_application.py\\n\\n    \\n\\ndone\\r\\nInstalling pip dependencies: ...working... \\r\\nRan pip subprocess with arguments:\\n['/azureml-envs/azureml_809a074975457de1dd27bdfcf2d79d61/bin/python', '-m', 'pip', 'install', '-U', '-r', '/azureml-environment-setup/condaenv.c85dz8eu.requirements.txt']\\nPip subprocess output:\\nCollecting azureml-defaults\\n  Downloading azureml_defaults-1.49.0-py3-none-any.whl (2.0 kB)\\nCollecting azureml-mlflow\\n  Downloading azureml_mlflow-1.48.0-py3-none-any.whl (812 kB)\\nCollecting azureml-dataset-runtime[fuse]~=1.49.0\\n  Downloading azureml_dataset_runtime-1.49.0-py3-none-any.whl (2.3 kB)\\nCollecting azureml-defaults\\n  Downloading azureml_defaults-1.48.0-py3-none-any.whl (2.0 kB)\\nCollecting azureml-inference-server-http~=0.7.2\\n  Downloading azureml_inference_server_http-0.7.7-py3-none-any.whl (56 kB)\\nCollecting azureml-defaults\\n  Downloading azureml_defaults-1.47.0-py3-none-any.whl (2.0 kB)\\nCollecting azureml-core~=1.47.0\\n  Downloading azureml_core-1.47.0-py3-none-any.whl (3.1 MB)\\nCollecting json-logging-py==0.2\\n  Downloading json-logging-py-0.2.tar.gz (3.6 kB)\\nCollecting configparser==3.7.4\\n  Downloading configparser-3.7.4-py2.py3-none-any.whl (22 kB)\\nCollecting azureml-dataset-runtime[fuse]~=1.47.0\\n  Downloading azureml_dataset_runtime-1.47.0-py3-none-any.whl (2.2 kB)\\nCollecting azure-common<2.0.0,>=1.1\\n  Downloading azure_common-1.1.28-py2.py3-none-any.whl (14 kB)\\nCollecting azure-identity\\n  Downloading azure_identity-1.10.0-py3-none-any.whl (134 kB)\\nCollecting azure-storage-blob<=12.13.0,>=12.5.0\\n  Downloading azure_storage_blob-12.13.0-py3-none-any.whl (377 kB)\\nCollecting azure-mgmt-core<2.0.0,>=1.2.0\\n  Downloading azure_mgmt_core-1.3.2-py3-none-any.whl (26 kB)\\nCollecting mlflow-skinny\\n  Downloading mlflow_skinny-1.23.1-py3-none-any.whl (3.2 MB)\\nCollecting msrest>=0.6.18\\n  Downloading msrest-0.7.1-py3-none-any.whl (85 kB)\\nCollecting azure-core!=1.22.0,<2.0.0,>=1.8.0\\n  Downloading azure_core-1.24.2-py3-none-any.whl (178 kB)\\nRequirement already satisfied: python-dateutil<3.0.0,>=2.7.3 in /azureml-envs/azureml_809a074975457de1dd27bdfcf2d79d61/lib/python3.6/site-packages (from azureml-mlflow->-r /azureml-environment-setup/condaenv.c85dz8eu.requirements.txt (line 2)) (2.8.2)\\nCollecting cryptography\\n  Downloading cryptography-39.0.1-cp36-abi3-manylinux_2_28_x86_64.whl (4.2 MB)\\nCollecting jsonpickle\\n  Downloading jsonpickle-2.2.0-py2.py3-none-any.whl (39 kB)\\nCollecting requests>=2.18.4\\n  Downloading requests-2.27.1-py2.py3-none-any.whl (63 kB)\\nRequirement already satisfied: six>=1.11.0 in /azureml-envs/azureml_809a074975457de1dd27bdfcf2d79d61/lib/python3.6/site-packages (from azure-core!=1.22.0,<2.0.0,>=1.8.0->azureml-mlflow->-r /azureml-environment-setup/condaenv.c85dz8eu.requirements.txt (line 2)) (1.16.0)\\nCollecting typing-extensions>=4.0.1\\n  Downloading typing_extensions-4.1.1-py3-none-any.whl (26 kB)\\nCollecting azure-mgmt-storage<21.0.0,>=16.0.0\\n  Downloading azure_mgmt_storage-20.0.0-py3-none-any.whl (2.0 MB)\\nCollecting paramiko<3.0.0,>=2.0.8\\n  Downloading paramiko-2.12.0-py2.py3-none-any.whl (213 kB)\\nCollecting packaging<22.0,>=20.0\\n  Downloading packaging-21.3-py3-none-any.whl (40 kB)\\nCollecting docker<7.0.0\\n  Downloading docker-5.0.3-py2.py3-none-any.whl (146 kB)\\nCollecting pathspec<1.0.0\\n  Downloading pathspec-0.9.0-py2.py3-none-any.whl (31 kB)\\nCollecting azure-mgmt-keyvault<11.0.0,>=0.40.0\\n  Downloading azure_mgmt_keyvault-10.0.0-py3-none-any.whl (489 kB)\\nCollecting knack~=0.10.0\\n  Downloading knack-0.10.1-py3-none-any.whl (61 kB)\\nCollecting azure-mgmt-resource<22.0.0,>=15.0.0\\n  Downloading azure_mgmt_resource-21.1.0-py3-none-any.whl (1.8 MB)\\nCollecting adal<=1.2.7,>=1.2.0\\n  Downloading adal-1.2.7-py2.py3-none-any.whl (55 kB)\\nCollecting backports.tempfile\\n  Downloading backports.tempfile-1.0-py2.py3-none-any.whl (4.4 kB)\\nCollecting msal-extensions<=1.0.0,>=0.3.0\\n  Downloading msal_extensions-1.0.0-py2.py3-none-any.whl (19 kB)\\nCollecting msal<2.0.0,>=1.15.0\\n  Downloading msal-1.21.0-py2.py3-none-any.whl (89 kB)\\nCollecting pyopenssl<23.0.0\\n  Downloading pyOpenSSL-22.1.0-py3-none-any.whl (57 kB)\\nCollecting msrestazure<=0.6.4,>=0.4.33\\r\\n  Downloading msrestazure-0.6.4-py2.py3-none-any.whl (40 kB)\\nCollecting ndg-httpsclient<=0.5.1\\n  Downloading ndg_httpsclient-0.5.1-py3-none-any.whl (34 kB)\\nRequirement already satisfied: pytz in /azureml-envs/azureml_809a074975457de1dd27bdfcf2d79d61/lib/python3.6/site-packages (from azureml-core~=1.47.0->azureml-defaults->-r /azureml-environment-setup/condaenv.c85dz8eu.requirements.txt (line 1)) (2021.3)\\nCollecting argcomplete<3\\n  Downloading argcomplete-2.0.0-py2.py3-none-any.whl (37 kB)\\nCollecting azure-mgmt-authorization<3,>=0.40.0\\n  Downloading azure_mgmt_authorization-2.0.0-py2.py3-none-any.whl (465 kB)\\nCollecting urllib3<2.0.0,>=1.23\\n  Downloading urllib3-1.26.14-py2.py3-none-any.whl (140 kB)\\nCollecting SecretStorage<4.0.0\\n  Downloading SecretStorage-3.3.3-py3-none-any.whl (15 kB)\\nCollecting PyJWT<3.0.0\\n  Downloading PyJWT-2.4.0-py3-none-any.whl (18 kB)\\nCollecting humanfriendly<11.0,>=4.7\\n  Downloading humanfriendly-10.0-py2.py3-none-any.whl (86 kB)\\nCollecting azure-mgmt-containerregistry<11,>=8.2.0\\n  Downloading azure_mgmt_containerregistry-10.0.0-py3-none-any.whl (1.2 MB)\\nCollecting azure-graphrbac<1.0.0,>=0.40.0\\n  Downloading azure_graphrbac-0.61.1-py2.py3-none-any.whl (141 kB)\\nCollecting contextlib2<22.0.0\\n  Downloading contextlib2-21.6.0-py2.py3-none-any.whl (13 kB)\\nCollecting jmespath<2.0.0\\n  Downloading jmespath-0.10.0-py2.py3-none-any.whl (24 kB)\\nCollecting pkginfo\\n  Downloading pkginfo-1.9.6-py3-none-any.whl (30 kB)\\nCollecting importlib-metadata<5,>=0.23\\n  Downloading importlib_metadata-4.8.3-py3-none-any.whl (17 kB)\\nCollecting pyarrow<=9.0.0,>=0.17.0\\n  Downloading pyarrow-6.0.1-cp36-cp36m-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (25.6 MB)\\nRequirement already satisfied: numpy!=1.19.3 in /azureml-envs/azureml_809a074975457de1dd27bdfcf2d79d61/lib/python3.6/site-packages (from azureml-dataset-runtime[fuse]~=1.47.0->azureml-defaults->-r /azureml-environment-setup/condaenv.c85dz8eu.requirements.txt (line 1)) (1.19.2)\\nCollecting azureml-dataprep<4.6.0a,>=4.5.0a\\n  Downloading azureml_dataprep-4.5.7-py3-none-any.whl (43.4 MB)\\nCollecting fusepy<4.0.0,>=3.0.1\\n  Downloading fusepy-3.0.1.tar.gz (11 kB)\\nCollecting azureml-dataprep-native<39.0.0,>=38.0.0\\n  Downloading azureml_dataprep_native-38.0.0-cp36-cp36m-manylinux1_x86_64.whl (1.3 MB)\\nCollecting pyyaml<7.0.0,>=5.1.0\\n  Downloading PyYAML-6.0-cp36-cp36m-manylinux_2_5_x86_64.manylinux1_x86_64.manylinux_2_12_x86_64.manylinux2010_x86_64.whl (603 kB)\\nCollecting cloudpickle<3.0.0,>=1.1.0\\n  Downloading cloudpickle-2.2.1-py3-none-any.whl (25 kB)\\nCollecting azure-identity\\n  Downloading azure_identity-1.7.0-py2.py3-none-any.whl (129 kB)\\nCollecting azureml-dataprep-rslex~=2.11.0dev0\\n  Downloading azureml_dataprep_rslex-2.11.4-cp36-cp36m-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (15.3 MB)\\nCollecting dotnetcore2<4.0.0,>=3.0.0\\n  Downloading dotnetcore2-3.1.23-py3-none-manylinux1_x86_64.whl (31.1 MB)\\nCollecting jsonschema\\n  Downloading jsonschema-3.2.0-py2.py3-none-any.whl (56 kB)\\nCollecting msal-extensions<=1.0.0,>=0.3.0\\n  Downloading msal_extensions-0.3.1-py2.py3-none-any.whl (18 kB)\\nCollecting opencensus-ext-azure~=1.1.0\\n  Downloading opencensus_ext_azure-1.1.8-py2.py3-none-any.whl (42 kB)\\nCollecting gunicorn==20.1.0\\n  Downloading gunicorn-20.1.0-py3-none-any.whl (79 kB)\\nCollecting inference-schema~=1.4.0\\n  Downloading inference_schema-1.4.2.1-py3-none-any.whl (21 kB)\\nCollecting flask-cors~=3.0.1\\n  Downloading Flask_Cors-3.0.10-py2.py3-none-any.whl (14 kB)\\nRequirement already satisfied: setuptools>=3.0 in /azureml-envs/azureml_809a074975457de1dd27bdfcf2d79d61/lib/python3.6/site-packages (from gunicorn==20.1.0->azureml-inference-server-http~=0.7.2->azureml-defaults->-r /azureml-environment-setup/condaenv.c85dz8eu.requirements.txt (line 1)) (58.0.4)\\nCollecting cffi>=1.12\\n  Downloading cffi-1.15.1-cp36-cp36m-manylinux_2_5_x86_64.manylinux1_x86_64.whl (402 kB)\\nCollecting pycparser\\n  Downloading pycparser-2.21-py2.py3-none-any.whl (118 kB)\\nCollecting websocket-client>=0.32.0\\n  Downloading websocket_client-1.3.1-py3-none-any.whl (54 kB)\\nCollecting distro>=1.2.0\\n  Downloading distro-1.8.0-py3-none-any.whl (20 kB)\\nCollecting Flask>=0.9\\n  Downloading Flask-2.0.3-py3-none-any.whl (95 kB)\\nCollecting Werkzeug>=2.0\\n  Downloading Werkzeug-2.0.3-py3-none-any.whl (289 kB)\\nCollecting click>=7.1.2\\n  Downloading click-8.0.4-py3-none-any.whl (97 kB)\\nCollecting Jinja2>=3.0\\n  Downloading Jinja2-3.0.3-py3-none-any.whl (133 kB)\\nCollecting itsdangerous>=2.0\\n  Downloading itsdangerous-2.0.1-py3-none-any.whl (18 kB)\\nCollecting zipp>=0.5\\n  Downloading zipp-3.6.0-py3-none-any.whl (5.3 kB)\\nCollecting wrapt<=1.12.1,>=1.11.1\\n  Downloading wrapt-1.12.1.tar.gz (27 kB)\\nCollecting MarkupSafe>=2.0\\n  Downloading MarkupSafe-2.0.1-cp36-cp36m-manylinux_2_5_x86_64.manylinux1_x86_64.manylinux_2_12_x86_64.manylinux2010_x86_64.whl (30 kB)\\nCollecting pygments\\n  Downloading Pygments-2.14.0-py3-none-any.whl (1.1 MB)\\nCollecting tabulate\\n  Downloading tabulate-0.8.10-py3-none-any.whl (29 kB)\\nCollecting portalocker<3,>=1.0\\n  Downloading portalocker-2.7.0-py2.py3-none-any.whl (15 kB)\\nRequirement already satisfied: certifi>=2017.4.17 in /azureml-envs/azureml_809a074975457de1dd27bdfcf2d79d61/lib/python3.6/site-packages (from msrest>=0.6.18->azureml-mlflow->-r /azureml-environment-setup/condaenv.c85dz8eu.requirements.txt (line 2)) (2021.5.30)\\nCollecting requests-oauthlib>=0.5.0\\n  Downloading requests_oauthlib-1.3.1-py2.py3-none-any.whl (23 kB)\\nCollecting isodate>=0.6.0\\n  Downloading isodate-0.6.1-py2.py3-none-any.whl (41 kB)\\nCollecting pyasn1>=0.1.1\\n  Downloading pyasn1-0.4.8-py2.py3-none-any.whl (77 kB)\\nCollecting psutil>=5.6.3\\n  Downloading psutil-5.9.4-cp36-abi3-manylinux_2_12_x86_64.manylinux2010_x86_64.manylinux_2_17_x86_64.manylinux2014_x86_64.whl (280 kB)\\nCollecting opencensus<1.0.0,>=0.11.1\\n  Downloading opencensus-0.11.1-py2.py3-none-any.whl (128 kB)\\nCollecting google-api-core<3.0.0,>=1.0.0\\n  Downloading google_api_core-2.8.2-py3-none-any.whl (114 kB)\\nCollecting opencensus-context>=0.1.3\\n  Downloading opencensus_context-0.1.3-py2.py3-none-any.whl (5.1 kB)\\nCollecting google-auth<3.0dev,>=1.25.0\\n  Downloading google_auth-2.16.1-py2.py3-none-any.whl (177 kB)\\nCollecting googleapis-common-protos<2.0dev,>=1.56.2\\n  Downloading googleapis_common_protos-1.56.3-py2.py3-none-any.whl (211 kB)\\nCollecting protobuf<5.0.0dev,>=3.15.0\\n  Downloading protobuf-3.19.6-cp36-cp36m-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (1.1 MB)\\nCollecting cachetools<6.0,>=2.0.0\\n  Downloading cachetools-4.2.4-py3-none-any.whl (10 kB)\\nCollecting rsa<5,>=3.1.4\\n  Downloading rsa-4.9-py3-none-any.whl (34 kB)\\nCollecting pyasn1-modules>=0.2.1\\n  Downloading pyasn1_modules-0.2.8-py2.py3-none-any.whl (155 kB)\\nCollecting contextvars\\n  Downloading contextvars-2.4.tar.gz (9.6 kB)\\nCollecting pyparsing!=3.0.5,>=2.0.2\\n  Downloading pyparsing-3.0.7-py3-none-any.whl (98 kB)\\nCollecting pynacl>=1.0.1\\n  Downloading PyNaCl-1.5.0-cp36-abi3-manylinux_2_17_x86_64.manylinux2014_x86_64.manylinux_2_24_x86_64.whl (856 kB)\\nCollecting bcrypt>=3.1.3\\n  Downloading bcrypt-4.0.1-cp36-abi3-manylinux_2_28_x86_64.whl (593 kB)\\nCollecting cryptography\\n  Downloading cryptography-38.0.4-cp36-abi3-manylinux_2_28_x86_64.whl (4.2 MB)\\nCollecting charset-normalizer~=2.0.0\\n  Downloading charset_normalizer-2.0.12-py3-none-any.whl (39 kB)\\nCollecting idna<4,>=2.5\\n  Downloading idna-3.4-py3-none-any.whl (61 kB)\\nCollecting oauthlib>=3.0.0\\n  Downloading oauthlib-3.2.2-py3-none-any.whl (151 kB)\\nCollecting PySocks!=1.5.7,>=1.5.6\\n  Downloading PySocks-1.7.1-py3-none-any.whl (16 kB)\\nCollecting jeepney>=0.6\\n  Downloading jeepney-0.7.1-py3-none-any.whl (54 kB)\\nCollecting dataclasses\\n  Downloading dataclasses-0.8-py3-none-any.whl (19 kB)\\nCollecting backports.weakref\\n  Downloading backports.weakref-1.0.post1-py2.py3-none-any.whl (5.2 kB)\\nCollecting immutables>=0.9\\n  Downloading immutables-0.19-cp36-cp36m-manylinux_2_5_x86_64.manylinux1_x86_64.manylinux_2_17_x86_64.manylinux2014_x86_64.whl (116 kB)\\nCollecting attrs>=17.4.0\\n  Downloading attrs-22.2.0-py3-none-any.whl (60 kB)\\nCollecting pyrsistent>=0.14.0\\n  Downloading pyrsistent-0.18.0-cp36-cp36m-manylinux1_x86_64.whl (117 kB)\\nCollecting entrypoints\\n  Downloading entrypoints-0.4-py3-none-any.whl (5.3 kB)\\nCollecting databricks-cli>=0.8.7\\n  Downloading databricks-cli-0.17.4.tar.gz (82 kB)\\nCollecting gitpython>=2.1.0\\n  Downloading GitPython-3.1.18-py3-none-any.whl (170 kB)\\nCollecting gitdb<5,>=4.0.1\\n  Downloading gitdb-4.0.9-py3-none-any.whl (63 kB)\\nCollecting smmap<6,>=3.0.1\\n  Downloading smmap-5.0.0-py3-none-any.whl (24 kB)\\nBuilding wheels for collected packages: json-logging-py, fusepy, wrapt, contextvars, databricks-cli\\n  Building wheel for json-logging-py (setup.py): started\\n  Building wheel for json-logging-py (setup.py): finished with status 'done'\\n  Created wheel for json-logging-py: filename=json_logging_py-0.2-py3-none-any.whl size=3924 sha256=b6747f7e2faf9bc6b412b666fcdce712f1f662152434adab0daa8f164a1f4b91\\n  Stored in directory: /root/.cache/pip/wheels/e2/1d/52/535a274b9c2ce7d4064838f2bdb62013801281ef7d7f21e2ee\\n  Building wheel for fusepy (setup.py): started\\n  Building wheel for fusepy (setup.py): finished with status 'done'\\n  Created wheel for fusepy: filename=fusepy-3.0.1-py3-none-any.whl size=10503 sha256=e931c8a1ebcf5681ba49c9e5f18be8344935bb5a59b5b41f71085d00eabab1e4\\n  Stored in directory: /root/.cache/pip/wheels/21/5c/83/1dd7e8a232d12227e5410120f4374b33adeb4037473105b079\\n  Building wheel for wrapt (setup.py): started\\n  Building wheel for wrapt (setup.py): finished with status 'done'\\n  Created wheel for wrapt: filename=wrapt-1.12.1-cp36-cp36m-linux_x86_64.whl size=76176 sha256=9012668188a7bfd2cd9ca5342279fd48ab6a0d7d89b9497139f9347829a2df8e\\n  Stored in directory: /root/.cache/pip/wheels/32/42/7f/23cae9ff6ef66798d00dc5d659088e57dbba01566f6c60db63\\n  Building wheel for contextvars (setup.py): started\\n  Building wheel for contextvars (setup.py): finished with status 'done'\\n  Created wheel for contextvars: filename=contextvars-2.4-py3-none-any.whl size=7681 sha256=c4d3e197822b43432983072ecab2ddd41c0aa3a86c0c4a2891ee44820cd2bb9b\\n  Stored in directory: /root/.cache/pip/wheels/41/11/53/911724983aa48deb94792432e14e518447212dd6c5477d49d3\\n  Building wheel for databricks-cli (setup.py): started\\n  Building wheel for databricks-cli (setup.py): finished with status 'done'\\n  Created wheel for databricks-cli: filename=databricks_cli-0.17.4-py3-none-any.whl size=142894 sha256=3e54a3017ad32db798b0e0b3f80a8c9ec37904d7ce18a4b7cbadd75779dddaeb\\n  Stored in directory: /root/.cache/pip/wheels/3a/02/39/c20d43e7613f33717df248d07e972f02c706054d69fd20029e\\nSuccessfully built json-logging-py fusepy wrapt contextvars databricks-cli\\nInstalling collected packages: pycparser, cffi, urllib3, PyJWT, idna, cryptography, charset-normalizer, typing-extensions, requests, pyasn1, zipp, rsa, pyasn1-modules, protobuf, portalocker, oauthlib, msal, immutables, cachetools, requests-oauthlib, pyrsistent, msal-extensions, MarkupSafe, isodate, importlib-metadata, googleapis-common-protos, google-auth, distro, dataclasses, contextvars, azure-core, attrs, Werkzeug, smmap, pyyaml, opencensus-context, msrest, jsonschema, Jinja2, itsdangerous, google-api-core, dotnetcore2, cloudpickle, click, azureml-dataprep-rslex, azureml-dataprep-native, azure-identity, adal, wrapt, websocket-client, tabulate, PySocks, pyparsing, pyopenssl, pynacl, pygments, pyarrow, psutil, opencensus, msrestazure, jmespath, jeepney, gitdb, Flask, bcrypt, backports.weakref, azureml-dataprep, azure-mgmt-core, azure-common, argcomplete, SecretStorage, pkginfo, pathspec, paramiko, packaging, opencensus-ext-azure, ndg-httpsclient, knack, jsonpickle, inference-schema, humanfriendly, gunicorn, gitpython, fusepy, flask-cors, entrypoints, docker, databricks-cli, contextlib2, backports.tempfile, azureml-dataset-runtime, azure-mgmt-storage, azure-mgmt-resource, azure-mgmt-keyvault, azure-mgmt-containerregistry, azure-mgmt-authorization, azure-graphrbac, mlflow-skinny, json-logging-py, configparser, azureml-inference-server-http, azureml-core, azure-storage-blob, azureml-mlflow, azureml-defaults\\nSuccessfully installed Flask-2.0.3 Jinja2-3.0.3 MarkupSafe-2.0.1 PyJWT-2.4.0 PySocks-1.7.1 SecretStorage-3.3.3 Werkzeug-2.0.3 adal-1.2.7 argcomplete-2.0.0 attrs-22.2.0 azure-common-1.1.28 azure-core-1.24.2 azure-graphrbac-0.61.1 azure-identity-1.7.0 azure-mgmt-authorization-2.0.0 azure-mgmt-containerregistry-10.0.0 azure-mgmt-core-1.3.2 azure-mgmt-keyvault-10.0.0 azure-mgmt-resource-21.1.0 azure-mgmt-storage-20.0.0 azure-storage-blob-12.13.0 azureml-core-1.47.0 azureml-dataprep-4.5.7 azureml-dataprep-native-38.0.0 azureml-dataprep-rslex-2.11.4 azureml-dataset-runtime-1.47.0 azureml-defaults-1.47.0 azureml-inference-server-http-0.7.7 azureml-mlflow-1.48.0 backports.tempfile-1.0 backports.weakref-1.0.post1 bcrypt-4.0.1 cachetools-4.2.4 cffi-1.15.1 charset-normalizer-2.0.12 click-8.0.4 cloudpickle-2.2.1 configparser-3.7.4 contextlib2-21.6.0 contextvars-2.4 cryptography-38.0.4 databricks-cli-0.17.4 dataclasses-0.8 distro-1.8.0 docker-5.0.3 dotnetcore2-3.1.23 entrypoints-0.4 flask-cors-3.0.10 fusepy-3.0.1 gitdb-4.0.9 gitpython-3.1.18 google-api-core-2.8.2 google-auth-2.16.1 googleapis-common-protos-1.56.3 gunicorn-20.1.0 humanfriendly-10.0 idna-3.4 immutables-0.19 importlib-metadata-4.8.3 inference-schema-1.4.2.1 isodate-0.6.1 itsdangerous-2.0.1 jeepney-0.7.1 jmespath-0.10.0 json-logging-py-0.2 jsonpickle-2.2.0 jsonschema-3.2.0 knack-0.10.1 mlflow-skinny-1.23.1 msal-1.21.0 msal-extensions-0.3.1 msrest-0.7.1 msrestazure-0.6.4 ndg-httpsclient-0.5.1 oauthlib-3.2.2 opencensus-0.11.1 opencensus-context-0.1.3 opencensus-ext-azure-1.1.8 packaging-21.3 paramiko-2.12.0 pathspec-0.9.0 pkginfo-1.9.6 portalocker-2.7.0 protobuf-3.19.6 psutil-5.9.4 pyarrow-6.0.1 pyasn1-0.4.8 pyasn1-modules-0.2.8 pycparser-2.21 pygments-2.14.0 pynacl-1.5.0 pyopenssl-22.1.0 pyparsing-3.0.7 pyrsistent-0.18.0 pyyaml-6.0 requests-2.27.1 requests-oauthlib-1.3.1 rsa-4.9 smmap-5.0.0 tabulate-0.8.10 typing-extensions-4.1.1 urllib3-1.26.14 websocket-client-1.3.1 wrapt-1.12.1 zipp-3.6.0\\n\\u001b[91m\\n\\n==> WARNING: A newer version of conda exists. <==\\n  current version: 4.12.0\\n  latest version: 23.1.0\\n\\nPlease update conda by running\\n\\n    $ conda update -n base -c defaults conda\\n\\n\\n\\u001b[0m\\ndone\\n#\\n# To activate this environment, use\\n#\\n#     $ conda activate /azureml-envs/azureml_809a074975457de1dd27bdfcf2d79d61\\n#\\n# To deactivate an active environment, use\\n#\\n#     $ conda deactivate\\n\\r\\nWARNING: /root/.conda/pkgs does not exist\\n\\r\\nRemoving intermediate container bf22488f5134\\n ---> 9ea07e168cc9\\nStep 9/21 : ENV PATH /azureml-envs/azureml_809a074975457de1dd27bdfcf2d79d61/bin:$PATH\\r\\n ---> Running in 7c5ab58be736\\nRemoving intermediate container 7c5ab58be736\\n ---> 4994b167f4f4\\nStep 10/21 : COPY azureml-environment-setup/send_conda_dependencies.py azureml-environment-setup/send_conda_dependencies.py\\n ---> 1709d34f9af0\\nStep 11/21 : RUN echo \\\"Copying environment context\\\"\\r\\n ---> Running in ad51ad369800\\nCopying environment context\\nRemoving intermediate container ad51ad369800\\n ---> 808c287afaba\\nStep 12/21 : COPY azureml-environment-setup/environment_context.json azureml-environment-setup/environment_context.json\\r\\n ---> 40846c6f7c3c\\nStep 13/21 : RUN python /azureml-environment-setup/send_conda_dependencies.py -p /azureml-envs/azureml_809a074975457de1dd27bdfcf2d79d61\\r\\n ---> Running in d81d580bdaa3\\nReport materialized dependencies for the environment\\nReading environment context\\nExporting conda environment\\nSending request with materialized conda environment details\\nSuccessfully sent materialized environment details\\r\\nRemoving intermediate container d81d580bdaa3\\n ---> 26c9d5f42c04\\nStep 14/21 : ENV AZUREML_CONDA_ENVIRONMENT_PATH /azureml-envs/azureml_809a074975457de1dd27bdfcf2d79d61\\r\\n ---> Running in 6e14f30487af\\nRemoving intermediate container 6e14f30487af\\n ---> 00b81a8470e4\\nStep 15/21 : ENV LD_LIBRARY_PATH /azureml-envs/azureml_809a074975457de1dd27bdfcf2d79d61/lib:$LD_LIBRARY_PATH\\r\\n ---> Running in 8378ce9e11ec\\nRemoving intermediate container 8378ce9e11ec\\n ---> 1c09722be782\\nStep 16/21 : ENV CONDA_DEFAULT_ENV=azureml_809a074975457de1dd27bdfcf2d79d61 CONDA_PREFIX=/azureml-envs/azureml_809a074975457de1dd27bdfcf2d79d61\\r\\n ---> Running in 408ef871d518\\nRemoving intermediate container 408ef871d518\\n ---> 3e60d93cae04\\nStep 17/21 : COPY azureml-environment-setup/spark_cache.py azureml-environment-setup/log4j.properties /azureml-environment-setup/\\r\\n ---> 0090f2eedb2e\\nStep 18/21 : RUN if [ $SPARK_HOME ]; then /bin/bash -c '$SPARK_HOME/bin/spark-submit  /azureml-environment-setup/spark_cache.py'; fi\\r\\n ---> Running in e5ca62b2df6a\\nRemoving intermediate container e5ca62b2df6a\\n ---> d2d4d24f5d82\\nStep 19/21 : RUN rm -rf azureml-environment-setup\\r\\n ---> Running in 87bfb02b43b1\\nRemoving intermediate container 87bfb02b43b1\\n ---> 1db36981af02\\nStep 20/21 : ENV AZUREML_ENVIRONMENT_IMAGE True\\r\\n ---> Running in fcc61f83b950\\nRemoving intermediate container fcc61f83b950\\n ---> 72feee2c1b42\\nStep 21/21 : CMD [\\\"bash\\\"]\\r\\n ---> Running in 5a14b1e9ed6b\\nRemoving intermediate container 5a14b1e9ed6b\\r\\n ---> 2b4aa9f1898e\\nSuccessfully built 2b4aa9f1898e\\nSuccessfully tagged 295d6fb9a9d4485db142b510aa43ff02.azurecr.io/azureml/azureml_b50cc105335d9e70a3bfb930c4b0b537:latest\\nSuccessfully tagged 295d6fb9a9d4485db142b510aa43ff02.azurecr.io/azureml/azureml_b50cc105335d9e70a3bfb930c4b0b537:1\\n2023/02/24 14:44:43 Successfully executed container: acb_step_0\\n2023/02/24 14:44:43 Executing step ID: acb_step_1. Timeout(sec): 5400, Working directory: '', Network: 'acb_default_network'\\n2023/02/24 14:44:43 Pushing image: 295d6fb9a9d4485db142b510aa43ff02.azurecr.io/azureml/azureml_b50cc105335d9e70a3bfb930c4b0b537:1, attempt 1\\nThe push refers to repository [295d6fb9a9d4485db142b510aa43ff02.azurecr.io/azureml/azureml_b50cc105335d9e70a3bfb930c4b0b537]\\n3e48a0763a52: Preparing\\ndad60da4b499: Preparing\\nfc478e4741b9: Preparing\\n1fc5426a8b3e: Preparing\\ne57e0f4fc085: Preparing\\n660f06a4ad9b: Preparing\\nb205db10786b: Preparing\\na6702a46d799: Preparing\\n327d04fb9773: Preparing\\n7059276cfcd3: Preparing\\n2bcdf82aed44: Preparing\\nb21e039321ee: Preparing\\n445a2d2462f0: Preparing\\n6e539e6b11c3: Preparing\\nb67f8b8feccd: Preparing\\n7e60813e02c4: Preparing\\n0d66ccba1288: Preparing\\n20b46ade1e43: Preparing\\n21d33b1352c9: Preparing\\naf7ed92504ae: Preparing\\n660f06a4ad9b: Waiting\\nb205db10786b: Waiting\\na6702a46d799: Waiting\\n327d04fb9773: Waiting\\n7059276cfcd3: Waiting\\n2bcdf82aed44: Waiting\\nb21e039321ee: Waiting\\n445a2d2462f0: Waiting\\n6e539e6b11c3: Waiting\\nb67f8b8feccd: Waiting\\n7e60813e02c4: Waiting\\n0d66ccba1288: Waiting\\n20b46ade1e43: Waiting\\n21d33b1352c9: Waiting\\naf7ed92504ae: Waiting\\ndad60da4b499: Pushed\\n3e48a0763a52: Pushed\\ne57e0f4fc085: Pushed\\n1fc5426a8b3e: Pushed\\nb205db10786b: Pushed\\r\\n327d04fb9773: Pushed\\na6702a46d799: Pushed\\nfc478e4741b9: Pushed\\n7059276cfcd3: Pushed\\n2bcdf82aed44: Pushed\\r\\nb21e039321ee: Pushed\\n445a2d2462f0: Pushed\\r\\n7e60813e02c4: Pushed\\n6e539e6b11c3: Pushed\\n0d66ccba1288: Pushed\\r\\n20b46ade1e43: Pushed\\r\\naf7ed92504ae: Pushed\\r\\nb67f8b8feccd: Pushed\\r\\n21d33b1352c9: Pushed\\r\\n660f06a4ad9b: Pushed\\r\\n1: digest: sha256:47ed248a77f25568dd6d468ceac987091354dbfe7d27674d45833a48a08e3889 size: 4514\\n2023/02/24 14:46:21 Successfully pushed image: 295d6fb9a9d4485db142b510aa43ff02.azurecr.io/azureml/azureml_b50cc105335d9e70a3bfb930c4b0b537:1\\n2023/02/24 14:46:21 Executing step ID: acb_step_2. Timeout(sec): 5400, Working directory: '', Network: 'acb_default_network'\\n2023/02/24 14:46:21 Pushing image: 295d6fb9a9d4485db142b510aa43ff02.azurecr.io/azureml/azureml_b50cc105335d9e70a3bfb930c4b0b537:latest, attempt 1\\nThe push refers to repository [295d6fb9a9d4485db142b510aa43ff02.azurecr.io/azureml/azureml_b50cc105335d9e70a3bfb930c4b0b537]\\r\\n3e48a0763a52: Preparing\\ndad60da4b499: Preparing\\nfc478e4741b9: Preparing\\n1fc5426a8b3e: Preparing\\ne57e0f4fc085: Preparing\\n660f06a4ad9b: Preparing\\nb205db10786b: Preparing\\na6702a46d799: Preparing\\n327d04fb9773: Preparing\\n7059276cfcd3: Preparing\\n2bcdf82aed44: Preparing\\nb21e039321ee: Preparing\\n445a2d2462f0: Preparing\\n6e539e6b11c3: Preparing\\nb67f8b8feccd: Preparing\\n7e60813e02c4: Preparing\\n0d66ccba1288: Preparing\\n20b46ade1e43: Preparing\\n21d33b1352c9: Preparing\\naf7ed92504ae: Preparing\\na6702a46d799: Waiting\\n327d04fb9773: Waiting\\n7059276cfcd3: Waiting\\n2bcdf82aed44: Waiting\\nb21e039321ee: Waiting\\n445a2d2462f0: Waiting\\n6e539e6b11c3: Waiting\\nb67f8b8feccd: Waiting\\n7e60813e02c4: Waiting\\n0d66ccba1288: Waiting\\n20b46ade1e43: Waiting\\n21d33b1352c9: Waiting\\naf7ed92504ae: Waiting\\n660f06a4ad9b: Waiting\\nb205db10786b: Waiting\\n3e48a0763a52: Layer already exists\\nfc478e4741b9: Layer already exists\\n1fc5426a8b3e: Layer already exists\\ndad60da4b499: Layer already exists\\ne57e0f4fc085: Layer already exists\\na6702a46d799: Layer already exists\\n660f06a4ad9b: Layer already exists\\nb205db10786b: Layer already exists\\n327d04fb9773: Layer already exists\\n7059276cfcd3: Layer already exists\\n6e539e6b11c3: Layer already exists\\nb21e039321ee: Layer already exists\\n2bcdf82aed44: Layer already exists\\n445a2d2462f0: Layer already exists\\n7e60813e02c4: Layer already exists\\nb67f8b8feccd: Layer already exists\\n0d66ccba1288: Layer already exists\\n20b46ade1e43: Layer already exists\\n21d33b1352c9: Layer already exists\\naf7ed92504ae: Layer already exists\\nlatest: digest: sha256:47ed248a77f25568dd6d468ceac987091354dbfe7d27674d45833a48a08e3889 size: 4514\\n2023/02/24 14:46:23 Successfully pushed image: 295d6fb9a9d4485db142b510aa43ff02.azurecr.io/azureml/azureml_b50cc105335d9e70a3bfb930c4b0b537:latest\\n2023/02/24 14:46:23 Step ID: acb_step_0 marked as successful (elapsed time in seconds: 148.186362)\\n2023/02/24 14:46:23 Populating digests for step ID: acb_step_0...\\n2023/02/24 14:46:24 Successfully populated digests for step ID: acb_step_0\\n2023/02/24 14:46:24 Step ID: acb_step_1 marked as successful (elapsed time in seconds: 98.079151)\\n2023/02/24 14:46:24 Step ID: acb_step_2 marked as successful (elapsed time in seconds: 1.513369)\\n2023/02/24 14:46:24 The following dependencies were found:\\n2023/02/24 14:46:24 \\n- image:\\n    registry: 295d6fb9a9d4485db142b510aa43ff02.azurecr.io\\n    repository: azureml/azureml_b50cc105335d9e70a3bfb930c4b0b537\\n    tag: latest\\n    digest: sha256:47ed248a77f25568dd6d468ceac987091354dbfe7d27674d45833a48a08e3889\\n  runtime-dependency:\\n    registry: mcr.microsoft.com\\n    repository: azureml/openmpi4.1.0-ubuntu20.04\\n    tag: 20221101.v1\\n    digest: sha256:4505a963b2d34a42b5eaef48b8142ca98123d05d3a95eee3fe57551570a70e3b\\n  git: {}\\n- image:\\n    registry: 295d6fb9a9d4485db142b510aa43ff02.azurecr.io\\n    repository: azureml/azureml_b50cc105335d9e70a3bfb930c4b0b537\\n    tag: \\\"1\\\"\\n    digest: sha256:47ed248a77f25568dd6d468ceac987091354dbfe7d27674d45833a48a08e3889\\n  runtime-dependency:\\n    registry: mcr.microsoft.com\\n    repository: azureml/openmpi4.1.0-ubuntu20.04\\n    tag: 20221101.v1\\n    digest: sha256:4505a963b2d34a42b5eaef48b8142ca98123d05d3a95eee3fe57551570a70e3b\\n  git: {}\\n\\n\\r\\nRun ID: ch1 was successful after 4m13s\\r\\n\\nRun is completed.\", \"graph\": {}, \"widget_settings\": {\"childWidgetDisplay\": \"popup\", \"send_telemetry\": false, \"log_level\": \"INFO\", \"sdk_version\": \"1.48.0\"}, \"loading\": false}"
          },
          "metadata": {}
        },
        {
          "output_type": "execute_result",
          "execution_count": 11,
          "data": {
            "text/plain": "{'runId': 'mslearn-train-insurance_1677249712_1d12aba6',\n 'target': 'sweetcluster',\n 'status': 'Completed',\n 'startTimeUtc': '2023-02-24T14:55:41.37363Z',\n 'endTimeUtc': '2023-02-24T14:56:47.783147Z',\n 'services': {},\n 'properties': {'_azureml.ComputeTargetType': 'amlctrain',\n  'ContentSnapshotId': 'aa476604-ded5-423b-b98b-791bd63d2225',\n  'ProcessInfoFile': 'azureml-logs/process_info.json',\n  'ProcessStatusFile': 'azureml-logs/process_status.json'},\n 'inputDatasets': [],\n 'outputDatasets': [],\n 'runDefinition': {'script': 'insurance_training.py',\n  'command': '',\n  'useAbsolutePath': False,\n  'arguments': [],\n  'sourceDirectoryDataStore': None,\n  'framework': 'Python',\n  'communicator': 'None',\n  'target': 'sweetcluster',\n  'dataReferences': {},\n  'data': {},\n  'outputData': {},\n  'datacaches': [],\n  'jobName': None,\n  'maxRunDurationSeconds': 2592000,\n  'nodeCount': 1,\n  'instanceTypes': [],\n  'priority': None,\n  'credentialPassthrough': False,\n  'identity': None,\n  'environment': {'name': 'experiment_env',\n   'version': 'Autosave_2023-02-24T14:41:56Z_a7b57b0c',\n   'assetId': 'azureml://locations/eastus2/workspaces/295d6fb9-a9d4-485d-b142-b510aa43ff02/environments/experiment_env/versions/Autosave_2023-02-24T14:41:56Z_a7b57b0c',\n   'autoRebuild': True,\n   'python': {'interpreterPath': 'python',\n    'userManagedDependencies': False,\n    'condaDependencies': {'name': 'simple_environment',\n     'dependencies': ['python=3.6.2',\n      'scikit-learn',\n      'pandas',\n      'pip',\n      {'pip': ['azureml-defaults', 'azureml-mlflow']}]},\n    'baseCondaEnvironment': None},\n   'environmentVariables': {'EXAMPLE_ENV_VAR': 'EXAMPLE_VALUE'},\n   'docker': {'baseImage': 'mcr.microsoft.com/azureml/openmpi4.1.0-ubuntu20.04:20221101.v1',\n    'platform': {'os': 'Linux', 'architecture': 'amd64'},\n    'baseDockerfile': None,\n    'baseImageRegistry': {'address': None, 'username': None, 'password': None},\n    'enabled': False,\n    'arguments': []},\n   'spark': {'repositories': [], 'packages': [], 'precachePackages': True},\n   'inferencingStackVersion': None},\n  'history': {'outputCollection': True,\n   'directoriesToWatch': ['logs'],\n   'enableMLflowTracking': True,\n   'snapshotProject': True},\n  'spark': {'configuration': {'spark.app.name': 'Azure ML Experiment',\n    'spark.yarn.maxAppAttempts': '1'}},\n  'parallelTask': {'maxRetriesPerWorker': 0,\n   'workerCountPerNode': 1,\n   'terminalExitCodes': None,\n   'configuration': {}},\n  'amlCompute': {'name': None,\n   'vmSize': None,\n   'retainCluster': False,\n   'clusterMaxNodeCount': None},\n  'aiSuperComputer': {'instanceType': 'D2',\n   'imageVersion': None,\n   'location': None,\n   'aiSuperComputerStorageData': None,\n   'interactive': False,\n   'scalePolicy': None,\n   'virtualClusterArmId': None,\n   'tensorboardLogDirectory': None,\n   'sshPublicKey': None,\n   'sshPublicKeys': None,\n   'enableAzmlInt': True,\n   'priority': 'Medium',\n   'slaTier': 'Standard',\n   'userAlias': None},\n  'kubernetesCompute': {'instanceType': None},\n  'tensorflow': {'workerCount': 1, 'parameterServerCount': 1},\n  'mpi': {'processCountPerNode': 1},\n  'pyTorch': {'communicationBackend': 'nccl', 'processCount': None},\n  'hdi': {'yarnDeployMode': 'Cluster'},\n  'containerInstance': {'region': None, 'cpuCores': 2.0, 'memoryGb': 3.5},\n  'exposedPorts': None,\n  'docker': {'useDocker': True,\n   'sharedVolumes': True,\n   'shmSize': '2g',\n   'arguments': []},\n  'cmk8sCompute': {'configuration': {}},\n  'commandReturnCodeConfig': {'returnCode': 'Zero',\n   'successfulReturnCodes': []},\n  'environmentVariables': {},\n  'applicationEndpoints': {},\n  'parameters': []},\n 'logFiles': {'azureml-logs/20_image_build_log.txt': 'https://testerinos9425848700.blob.core.windows.net/azureml/ExperimentRun/dcid.mslearn-train-insurance_1677249712_1d12aba6/azureml-logs/20_image_build_log.txt?sv=2019-07-07&sr=b&sig=i9jS4JKU73WwDjW9UDx2DwdD6aq6PERoeZVERGEhw7E%3D&skoid=a310c481-83a8-4f6b-a2d7-27947d69d9e1&sktid=82676786-5bc7-43c6-b8f8-b3ee02b0b5f3&skt=2023-02-24T14%3A31%3A57Z&ske=2023-02-25T22%3A41%3A57Z&sks=b&skv=2019-07-07&st=2023-02-24T14%3A47%3A21Z&se=2023-02-24T22%3A57%3A21Z&sp=r',\n  'user_logs/std_log.txt': 'https://testerinos9425848700.blob.core.windows.net/azureml/ExperimentRun/dcid.mslearn-train-insurance_1677249712_1d12aba6/user_logs/std_log.txt?sv=2019-07-07&sr=b&sig=k5Js5r6WFzG5450eRl6Hq50o4lgGNHm9EU1bmE1A8%2B8%3D&skoid=a310c481-83a8-4f6b-a2d7-27947d69d9e1&sktid=82676786-5bc7-43c6-b8f8-b3ee02b0b5f3&skt=2023-02-24T14%3A31%3A57Z&ske=2023-02-25T22%3A41%3A57Z&sks=b&skv=2019-07-07&st=2023-02-24T14%3A47%3A21Z&se=2023-02-24T22%3A57%3A21Z&sp=r',\n  'system_logs/cs_capability/cs-capability.log': 'https://testerinos9425848700.blob.core.windows.net/azureml/ExperimentRun/dcid.mslearn-train-insurance_1677249712_1d12aba6/system_logs/cs_capability/cs-capability.log?sv=2019-07-07&sr=b&sig=yMNnARLDgMRTF8d4DC5ud6gLDiTW7eL2Zxs4ka%2FAPfM%3D&skoid=a310c481-83a8-4f6b-a2d7-27947d69d9e1&sktid=82676786-5bc7-43c6-b8f8-b3ee02b0b5f3&skt=2023-02-24T14%3A31%3A57Z&ske=2023-02-25T22%3A41%3A57Z&sks=b&skv=2019-07-07&st=2023-02-24T14%3A47%3A21Z&se=2023-02-24T22%3A57%3A21Z&sp=r',\n  'system_logs/hosttools_capability/hosttools-capability.log': 'https://testerinos9425848700.blob.core.windows.net/azureml/ExperimentRun/dcid.mslearn-train-insurance_1677249712_1d12aba6/system_logs/hosttools_capability/hosttools-capability.log?sv=2019-07-07&sr=b&sig=NdPOOC1f4xUk5kNoVytztunQ7Ht7zZGOjn6NacoW8mk%3D&skoid=a310c481-83a8-4f6b-a2d7-27947d69d9e1&sktid=82676786-5bc7-43c6-b8f8-b3ee02b0b5f3&skt=2023-02-24T14%3A31%3A57Z&ske=2023-02-25T22%3A41%3A57Z&sks=b&skv=2019-07-07&st=2023-02-24T14%3A47%3A21Z&se=2023-02-24T22%3A57%3A21Z&sp=r',\n  'system_logs/lifecycler/execution-wrapper.log': 'https://testerinos9425848700.blob.core.windows.net/azureml/ExperimentRun/dcid.mslearn-train-insurance_1677249712_1d12aba6/system_logs/lifecycler/execution-wrapper.log?sv=2019-07-07&sr=b&sig=UdhbMpl1IZsjN8cHmuaTR4Zi%2FPhTOCeEtvbVPurcYqs%3D&skoid=a310c481-83a8-4f6b-a2d7-27947d69d9e1&sktid=82676786-5bc7-43c6-b8f8-b3ee02b0b5f3&skt=2023-02-24T14%3A31%3A57Z&ske=2023-02-25T22%3A41%3A57Z&sks=b&skv=2019-07-07&st=2023-02-24T14%3A47%3A21Z&se=2023-02-24T22%3A57%3A21Z&sp=r',\n  'system_logs/lifecycler/lifecycler.log': 'https://testerinos9425848700.blob.core.windows.net/azureml/ExperimentRun/dcid.mslearn-train-insurance_1677249712_1d12aba6/system_logs/lifecycler/lifecycler.log?sv=2019-07-07&sr=b&sig=ndClR5GrKiQFC7Hz0uJ6aPHlOvMFM0i%2FflYZ2I7f6QI%3D&skoid=a310c481-83a8-4f6b-a2d7-27947d69d9e1&sktid=82676786-5bc7-43c6-b8f8-b3ee02b0b5f3&skt=2023-02-24T14%3A31%3A57Z&ske=2023-02-25T22%3A41%3A57Z&sks=b&skv=2019-07-07&st=2023-02-24T14%3A47%3A21Z&se=2023-02-24T22%3A57%3A21Z&sp=r',\n  'system_logs/metrics_capability/metrics-capability.log': 'https://testerinos9425848700.blob.core.windows.net/azureml/ExperimentRun/dcid.mslearn-train-insurance_1677249712_1d12aba6/system_logs/metrics_capability/metrics-capability.log?sv=2019-07-07&sr=b&sig=kTweKaDRwj6Fjgbs3Yy2m1ybkkjfSsZGY97AZigCI6Y%3D&skoid=a310c481-83a8-4f6b-a2d7-27947d69d9e1&sktid=82676786-5bc7-43c6-b8f8-b3ee02b0b5f3&skt=2023-02-24T14%3A31%3A57Z&ske=2023-02-25T22%3A41%3A57Z&sks=b&skv=2019-07-07&st=2023-02-24T14%3A47%3A21Z&se=2023-02-24T22%3A57%3A21Z&sp=r',\n  'system_logs/snapshot_capability/snapshot-capability.log': 'https://testerinos9425848700.blob.core.windows.net/azureml/ExperimentRun/dcid.mslearn-train-insurance_1677249712_1d12aba6/system_logs/snapshot_capability/snapshot-capability.log?sv=2019-07-07&sr=b&sig=d3Nqi1OT%2FLq83ooTEM6XarDQiI78Gs4by1yQRydojIQ%3D&skoid=a310c481-83a8-4f6b-a2d7-27947d69d9e1&sktid=82676786-5bc7-43c6-b8f8-b3ee02b0b5f3&skt=2023-02-24T14%3A31%3A57Z&ske=2023-02-25T22%3A41%3A57Z&sks=b&skv=2019-07-07&st=2023-02-24T14%3A47%3A21Z&se=2023-02-24T22%3A57%3A21Z&sp=r'},\n 'submittedBy': 'labuser_44930_26128078'}"
          },
          "metadata": {}
        },
        {
          "output_type": "stream",
          "name": "stdout",
          "text": "Unexpected exception formatting exception. Falling back to standard exception\n"
        }
      ],
      "execution_count": 11,
      "metadata": {
        "jupyter": {
          "source_hidden": false,
          "outputs_hidden": false
        },
        "nteract": {
          "transient": {
            "deleting": false
          }
        },
        "gather": {
          "logged": 1677250642137
        }
      }
    },
    {
      "cell_type": "code",
      "source": [
        "\r\n",
        "# Get logged metrics and files\r\n",
        "metrics = run.get_metrics()\r\n",
        "for key in metrics.keys():\r\n",
        "        print(key, metrics.get(key))\r\n",
        "print('\\n')\r\n",
        "for file in run.get_file_names():\r\n",
        "    print(file)"
      ],
      "outputs": [
        {
          "output_type": "stream",
          "name": "stdout",
          "text": "r2 0.15\nRMSE 131201335.64669806\n\n\nazureml-logs/20_image_build_log.txt\noutputs/insurance_model.pkl\nsystem_logs/cs_capability/cs-capability.log\nsystem_logs/hosttools_capability/hosttools-capability.log\nsystem_logs/lifecycler/execution-wrapper.log\nsystem_logs/lifecycler/lifecycler.log\nsystem_logs/metrics_capability/metrics-capability.log\nsystem_logs/snapshot_capability/snapshot-capability.log\nuser_logs/std_log.txt\n"
        }
      ],
      "execution_count": 12,
      "metadata": {
        "jupyter": {
          "source_hidden": false,
          "outputs_hidden": false
        },
        "nteract": {
          "transient": {
            "deleting": false
          }
        },
        "gather": {
          "logged": 1677250642906
        }
      }
    },
    {
      "cell_type": "markdown",
      "source": [
        "## Register the Model\r\n",
        "\r\n",
        "With the model artifact created from the training script, we can save the model within our Azure Workspace.  "
      ],
      "metadata": {
        "nteract": {
          "transient": {
            "deleting": false
          }
        }
      }
    },
    {
      "cell_type": "code",
      "source": [
        "# Register the model\r\n",
        "run.register_model(model_path='outputs/insurance_model.pkl', model_name='insurance_model',\r\n",
        "                   tags={'Training context':'Script'},\r\n",
        "                   properties={'r2': run.get_metrics()['r2'], 'RMSE': run.get_metrics()['RMSE']})"
      ],
      "outputs": [
        {
          "output_type": "execute_result",
          "execution_count": 13,
          "data": {
            "text/plain": "Model(workspace=Workspace.create(name='testerinos', subscription_id='71fa0172-ce90-403c-94a9-14ce1e88f56a', resource_group='rg_eastus_44930_1_1677248835383'), name=insurance_model, id=insurance_model:1, version=1, tags={'Training context': 'Script'}, properties={'r2': '0.15', 'RMSE': '131201335.64669806'})"
          },
          "metadata": {}
        }
      ],
      "execution_count": 13,
      "metadata": {
        "jupyter": {
          "source_hidden": false,
          "outputs_hidden": false
        },
        "nteract": {
          "transient": {
            "deleting": false
          }
        },
        "gather": {
          "logged": 1677250645504
        }
      }
    },
    {
      "cell_type": "markdown",
      "source": [
        "After creating the model, we can decide to deploy as an endpoint to make inferences."
      ],
      "metadata": {
        "nteract": {
          "transient": {
            "deleting": false
          }
        }
      }
    },
    {
      "cell_type": "code",
      "source": [
        "# Fetches latest model\r\n",
        "model = ws.models['insurance_model']\r\n",
        "print(model.name, 'version', model.version)"
      ],
      "outputs": [
        {
          "output_type": "stream",
          "name": "stdout",
          "text": "insurance_model version 1\n"
        }
      ],
      "execution_count": 14,
      "metadata": {
        "jupyter": {
          "source_hidden": false,
          "outputs_hidden": false
        },
        "nteract": {
          "transient": {
            "deleting": false
          }
        },
        "gather": {
          "logged": 1677250645747
        }
      }
    },
    {
      "cell_type": "code",
      "source": [
        "import os\r\n",
        "\r\n",
        "# Create a folder for the deployment files\r\n",
        "deployment_folder = './insurance_service'\r\n",
        "os.makedirs(deployment_folder, exist_ok=True)\r\n",
        "print(deployment_folder, 'folder created.')\r\n",
        "\r\n",
        "# Set path for scoring script\r\n",
        "script_file = 'score_insurance.py'\r\n",
        "script_path = os.path.join(deployment_folder,script_file)"
      ],
      "outputs": [
        {
          "output_type": "stream",
          "name": "stdout",
          "text": "./insurance_service folder created.\n"
        }
      ],
      "execution_count": 15,
      "metadata": {
        "jupyter": {
          "source_hidden": false,
          "outputs_hidden": false
        },
        "nteract": {
          "transient": {
            "deleting": false
          }
        },
        "gather": {
          "logged": 1677250646086
        }
      }
    },
    {
      "cell_type": "code",
      "source": [
        "%%writefile $script_path\r\n",
        "import json\r\n",
        "import joblib\r\n",
        "import numpy as np\r\n",
        "import os\r\n",
        "\r\n",
        "# Called when the service is loaded\r\n",
        "def init():\r\n",
        "    global model\r\n",
        "    # Get the path to the deployed model file and load it\r\n",
        "    model_path = os.path.join(os.getenv('AZUREML_MODEL_DIR'), 'insurance_model.pkl')\r\n",
        "    model = joblib.load(model_path)\r\n",
        "\r\n",
        "# Called when a request is received\r\n",
        "def run(raw_data):\r\n",
        "    # Get the input data as a numpy array\r\n",
        "    data = np.array(json.loads(raw_data)['data'])\r\n",
        "    # Get a prediction from the model\r\n",
        "    predictions = model.predict(data)\r\n",
        "\r\n",
        "    predicted_charges = []\r\n",
        "    for prediction in predictions:\r\n",
        "        predicted_charges.append(prediction)\r\n",
        "\r\n",
        "    return json.dumps(predicted_charges)"
      ],
      "outputs": [
        {
          "output_type": "stream",
          "name": "stdout",
          "text": "Overwriting ./insurance_service/score_insurance.py\n"
        }
      ],
      "execution_count": 18,
      "metadata": {
        "jupyter": {
          "source_hidden": false,
          "outputs_hidden": false
        },
        "nteract": {
          "transient": {
            "deleting": false
          }
        }
      }
    },
    {
      "cell_type": "code",
      "source": [
        "from azureml.core import Environment\r\n",
        "from azureml.core import Model\r\n",
        "from azureml.core.model import InferenceConfig\r\n",
        "from azureml.core.webservice import AciWebservice\r\n",
        "\r\n",
        "# Configure the scoring environment\r\n",
        "service_env = Environment.get(workspace=ws, name=\"AzureML-sklearn-0.24.1-ubuntu18.04-py37-cpu-inference\")\r\n",
        "service_env.inferencing_stack_version=\"latest\"\r\n",
        "\r\n",
        "inference_config = InferenceConfig(source_directory=deployment_folder,\r\n",
        "                                   entry_script=script_file,\r\n",
        "                                   environment=service_env)\r\n",
        "\r\n",
        "# Configure the web service container\r\n",
        "deployment_config = AciWebservice.deploy_configuration(cpu_cores=1, memory_gb=1)\r\n",
        "\r\n",
        "# Deploy the model as a service\r\n",
        "print('Deploying model...')\r\n",
        "service_name = \"insurance-service\"\r\n",
        "service = Model.deploy(ws, service_name, [model], inference_config, deployment_config, overwrite=True)\r\n",
        "service.wait_for_deployment(True)\r\n",
        "print(service.state)"
      ],
      "outputs": [
        {
          "output_type": "stream",
          "name": "stderr",
          "text": "/tmp/ipykernel_34482/3165749768.py:20: FutureWarning: azureml.core.model:\nTo leverage new model deployment capabilities, AzureML recommends using CLI/SDK v2 to deploy models as online endpoint, \nplease refer to respective documentations \nhttps://docs.microsoft.com/azure/machine-learning/how-to-deploy-managed-online-endpoints /\nhttps://docs.microsoft.com/azure/machine-learning/how-to-attach-kubernetes-anywhere \nFor more information on migration, see https://aka.ms/acimoemigration. \nTo disable CLI/SDK v1 deprecation warning set AZUREML_LOG_DEPRECATION_WARNING_ENABLED to 'False'\n  service = Model.deploy(ws, service_name, [model], inference_config, deployment_config, overwrite=True)\n"
        },
        {
          "output_type": "stream",
          "name": "stdout",
          "text": "Deploying model...\nDeploying model...\nTips: You can try get_logs(): https://aka.ms/debugimage#dockerlog or local deployment: https://aka.ms/debugimage#debug-locally to debug if deployment takes longer than 10 minutes.\nRunning\n2023-02-24 14:58:38+00:00 Creating Container Registry if not exists.\n2023-02-24 14:58:38+00:00 Registering the environment.\n2023-02-24 14:58:38+00:00 Use the existing image.\n2023-02-24 14:58:39+00:00 Submitting deployment to compute.\n2023-02-24 14:58:45+00:00 Checking the status of deployment insurance-service2..\n2023-02-24 14:59:50+00:00 Checking the status of inference endpoint insurance-service2.\nSucceeded\nACI service creation operation finished, operation \"Succeeded\"\nHealthy\nDeploying model...\nTips: You can try get_logs(): https://aka.ms/debugimage#dockerlog or local deployment: https://aka.ms/debugimage#debug-locally to debug if deployment takes longer than 10 minutes.\nRunning\n2023-02-24 15:00:25+00:00 Creating Container Registry if not exists.\n2023-02-24 15:00:26+00:00 Use the existing image.\n2023-02-24 15:00:26+00:00 Generating deployment configuration.\n2023-02-24 15:00:27+00:00 Submitting deployment to compute.\n2023-02-24 15:00:32+00:00 Checking the status of deployment insurance-service..\n2023-02-24 15:01:35+00:00 Checking the status of inference endpoint insurance-service.\nSucceeded\nACI service creation operation finished, operation \"Succeeded\"\nHealthy\n"
        }
      ],
      "execution_count": 25,
      "metadata": {
        "jupyter": {
          "source_hidden": false,
          "outputs_hidden": false
        },
        "nteract": {
          "transient": {
            "deleting": false
          }
        },
        "gather": {
          "logged": 1677250932674
        }
      }
    },
    {
      "cell_type": "code",
      "source": [
        "\r\n",
        "for webservice_name in ws.webservices:\r\n",
        "    print(webservice_name)"
      ],
      "outputs": [
        {
          "output_type": "stream",
          "name": "stdout",
          "text": "insurance-service2\n"
        }
      ],
      "execution_count": 23,
      "metadata": {
        "jupyter": {
          "source_hidden": false,
          "outputs_hidden": false
        },
        "nteract": {
          "transient": {
            "deleting": false
          }
        },
        "gather": {
          "logged": 1677250816738
        }
      }
    },
    {
      "cell_type": "code",
      "source": [
        "## Make Inferences\r\n",
        "\r\n",
        "import json\r\n",
        "\r\n",
        "x_new = [[31,25.74,0],[18,33.77,1],[60,40,5]]\r\n",
        "\r\n",
        "input_json = json.dumps({\"data\": x_new})\r\n",
        "\r\n",
        "# Call the web service, passing the input data (the web service will also accept the data in binary format)\r\n",
        "predictions = service.run(input_data = input_json)\r\n",
        "\r\n",
        "# Get the predicted class - it'll be the first (and only) one.\r\n",
        "predicted_charges= json.loads(predictions)\r\n",
        "\r\n",
        "print(predicted_charges)"
      ],
      "outputs": [
        {
          "output_type": "stream",
          "name": "stdout",
          "text": "[9276.33627779451, 9637.090640939397, 23230.61594226955]\n"
        }
      ],
      "execution_count": 27,
      "metadata": {
        "jupyter": {
          "source_hidden": false,
          "outputs_hidden": false
        },
        "nteract": {
          "transient": {
            "deleting": false
          }
        },
        "gather": {
          "logged": 1677250962077
        }
      }
    },
    {
      "cell_type": "markdown",
      "source": [
        "Research/References:\r\n",
        "\r\n",
        "- https://github.com/MicrosoftLearning/mslearn-dp100/blob/main/05%20-%20Train%20Models.ipynb\r\n",
        "\r\n",
        "\r\n",
        "Looking Ahead:\r\n",
        "- "
      ],
      "metadata": {
        "nteract": {
          "transient": {
            "deleting": false
          }
        }
      }
    }
  ],
  "metadata": {
    "kernelspec": {
      "name": "python310-sdkv2",
      "language": "python",
      "display_name": "Python 3.10 - SDK v2"
    },
    "language_info": {
      "name": "python",
      "version": "3.10.9",
      "mimetype": "text/x-python",
      "codemirror_mode": {
        "name": "ipython",
        "version": 3
      },
      "pygments_lexer": "ipython3",
      "nbconvert_exporter": "python",
      "file_extension": ".py"
    },
    "microsoft": {
      "ms_spell_check": {
        "ms_spell_check_language": "en"
      },
      "host": {
        "AzureML": {
          "notebookHasBeenCompleted": true
        }
      }
    },
    "kernel_info": {
      "name": "python310-sdkv2"
    },
    "nteract": {
      "version": "nteract-front-end@1.0.0"
    }
  },
  "nbformat": 4,
  "nbformat_minor": 2
}